{"remainingRequest":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/babel-loader/lib/index.js!/Users/huangrong/workspace/apitest/apitest-web/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/huangrong/workspace/apitest/apitest-web/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangrong/workspace/apitest/apitest-web/src/views/other/zip/index.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/huangrong/workspace/apitest/apitest-web/src/views/other/zip/index.vue","mtime":1587528109453},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"/Users/huangrong/workspace/apitest/apitest-web/node_modules/@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { fetchList } from '@/api/article';\nexport default {\n  name: 'ExportZip',\n  data: function data() {\n    return {\n      list: null,\n      listLoading: true,\n      downloadLoading: false,\n      filename: ''\n    };\n  },\n  created: function created() {\n    this.fetchData();\n  },\n  methods: {\n    fetchData: function () {\n      var _fetchData = _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        var _yield$fetchList, data;\n\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                this.listLoading = true;\n                _context.next = 3;\n                return fetchList();\n\n              case 3:\n                _yield$fetchList = _context.sent;\n                data = _yield$fetchList.data;\n                this.list = data.items;\n                this.listLoading = false;\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function fetchData() {\n        return _fetchData.apply(this, arguments);\n      }\n\n      return fetchData;\n    }(),\n    handleDownload: function handleDownload() {\n      var _this = this;\n\n      this.downloadLoading = true;\n      import('@/vendor/Export2Zip').then(function (zip) {\n        var tHeader = ['Id', 'Title', 'Author', 'Readings', 'Date'];\n        var filterVal = ['id', 'title', 'author', 'pageviews', 'display_time'];\n        var list = _this.list;\n\n        var data = _this.formatJson(filterVal, list);\n\n        zip.export_txt_to_zip(tHeader, data, _this.filename, _this.filename);\n        _this.downloadLoading = false;\n      });\n    },\n    formatJson: function formatJson(filterVal, jsonData) {\n      return jsonData.map(function (v) {\n        return filterVal.map(function (j) {\n          return v[j];\n        });\n      });\n    }\n  }\n};",{"version":3,"sources":["index.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCA,SAAA,SAAA,QAAA,eAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,WADA;AAEA,EAAA,IAFA,kBAEA;AACA,WAAA;AACA,MAAA,IAAA,EAAA,IADA;AAEA,MAAA,WAAA,EAAA,IAFA;AAGA,MAAA,eAAA,EAAA,KAHA;AAIA,MAAA,QAAA,EAAA;AAJA,KAAA;AAMA,GATA;AAUA,EAAA,OAVA,qBAUA;AACA,SAAA,SAAA;AACA,GAZA;AAaA,EAAA,OAAA,EAAA;AACA,IAAA,SADA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAEA,qBAAA,WAAA,GAAA,IAAA;AAFA;AAAA,uBAGA,SAAA,EAHA;;AAAA;AAAA;AAGA,gBAAA,IAHA,oBAGA,IAHA;AAIA,qBAAA,IAAA,GAAA,IAAA,CAAA,KAAA;AACA,qBAAA,WAAA,GAAA,KAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAOA,IAAA,cAPA,4BAOA;AAAA;;AACA,WAAA,eAAA,GAAA,IAAA;AACA,aAAA,qBAAA,EAAA,IAAA,CAAA,UAAA,GAAA,EAAA;AACA,YAAA,OAAA,GAAA,CAAA,IAAA,EAAA,OAAA,EAAA,QAAA,EAAA,UAAA,EAAA,MAAA,CAAA;AACA,YAAA,SAAA,GAAA,CAAA,IAAA,EAAA,OAAA,EAAA,QAAA,EAAA,WAAA,EAAA,cAAA,CAAA;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,IAAA;;AACA,YAAA,IAAA,GAAA,KAAA,CAAA,UAAA,CAAA,SAAA,EAAA,IAAA,CAAA;;AACA,QAAA,GAAA,CAAA,iBAAA,CAAA,OAAA,EAAA,IAAA,EAAA,KAAA,CAAA,QAAA,EAAA,KAAA,CAAA,QAAA;AACA,QAAA,KAAA,CAAA,eAAA,GAAA,KAAA;AACA,OAPA;AAQA,KAjBA;AAkBA,IAAA,UAlBA,sBAkBA,SAlBA,EAkBA,QAlBA,EAkBA;AACA,aAAA,QAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,eAAA,SAAA,CAAA,GAAA,CAAA,UAAA,CAAA;AAAA,iBAAA,CAAA,CAAA,CAAA,CAAA;AAAA,SAAA,CAAA;AAAA,OAAA,CAAA;AACA;AApBA;AAbA,CAAA","sourcesContent":["<template>\n  <div class=\"app-container\">\n    <el-input v-model=\"filename\" placeholder=\"Please enter the file name (default file)\" style=\"width:300px;\" prefix-icon=\"el-icon-document\" />\n    <el-button :loading=\"downloadLoading\" style=\"margin-bottom:20px;\" type=\"primary\" icon=\"el-icon-document\" @click=\"handleDownload\">\n      Export Zip\n    </el-button>\n    <el-table v-loading=\"listLoading\" :data=\"list\" element-loading-text=\"拼命加载中\" border fit highlight-current-row>\n      <el-table-column align=\"center\" label=\"ID\" width=\"95\">\n        <template slot-scope=\"scope\">\n          {{ scope.$index }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Title\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.title }}\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Author\" width=\"95\" align=\"center\">\n        <template slot-scope=\"scope\">\n          <el-tag>{{ scope.row.author }}</el-tag>\n        </template>\n      </el-table-column>\n      <el-table-column label=\"Readings\" width=\"115\" align=\"center\">\n        <template slot-scope=\"scope\">\n          {{ scope.row.pageviews }}\n        </template>\n      </el-table-column>\n      <el-table-column align=\"center\" label=\"Date\" width=\"220\">\n        <template slot-scope=\"scope\">\n          <i class=\"el-icon-time\" />\n          <span>{{ scope.row.display_time }}</span>\n        </template>\n      </el-table-column>\n    </el-table>\n  </div>\n</template>\n\n<script>\nimport { fetchList } from '@/api/article'\n\nexport default {\n  name: 'ExportZip',\n  data() {\n    return {\n      list: null,\n      listLoading: true,\n      downloadLoading: false,\n      filename: ''\n    }\n  },\n  created() {\n    this.fetchData()\n  },\n  methods: {\n    async fetchData() {\n      this.listLoading = true\n      const { data } = await fetchList()\n      this.list = data.items\n      this.listLoading = false\n    },\n    handleDownload() {\n      this.downloadLoading = true\n      import('@/vendor/Export2Zip').then(zip => {\n        const tHeader = ['Id', 'Title', 'Author', 'Readings', 'Date']\n        const filterVal = ['id', 'title', 'author', 'pageviews', 'display_time']\n        const list = this.list\n        const data = this.formatJson(filterVal, list)\n        zip.export_txt_to_zip(tHeader, data, this.filename, this.filename)\n        this.downloadLoading = false\n      })\n    },\n    formatJson(filterVal, jsonData) {\n      return jsonData.map(v => filterVal.map(j => v[j]))\n    }\n  }\n}\n</script>\n"],"sourceRoot":"src/views/other/zip"}]}