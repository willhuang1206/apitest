{"remainingRequest":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/babel-loader/lib/index.js!/Users/huangrong/workspace/apitest/apitest-web/src/utils/error-log.js","dependencies":[{"path":"/Users/huangrong/workspace/apitest/apitest-web/src/utils/error-log.js","mtime":1587528109433},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-web/node_modules/babel-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.array.includes\";\nimport \"core-js/modules/es6.string.includes\";\nimport Vue from 'vue';\nimport store from '@/store';\nimport { isString, isArray } from '@/utils/validate';\nimport settings from '@/settings'; // you can set in settings.js\n// errorLog:'production' | ['production', 'development']\n\nvar needErrorLog = settings.errorLog;\n\nfunction checkNeed() {\n  var env = process.env.NODE_ENV;\n\n  if (isString(needErrorLog)) {\n    return env === needErrorLog;\n  }\n\n  if (isArray(needErrorLog)) {\n    return needErrorLog.includes(env);\n  }\n\n  return false;\n}\n\nif (checkNeed()) {\n  Vue.config.errorHandler = function (err, vm, info, a) {\n    // Don't ask me why I use Vue.nextTick, it just a hack.\n    // detail see https://forum.vuejs.org/t/dispatch-in-vue-config-errorhandler-has-some-problem/23500\n    Vue.nextTick(function () {\n      store.dispatch('errorLog/addErrorLog', {\n        err: err,\n        vm: vm,\n        info: info,\n        url: window.location.href\n      });\n      console.error(err, info);\n    });\n  };\n}",{"version":3,"sources":["/Users/huangrong/workspace/apitest/apitest-web/src/utils/error-log.js"],"names":["Vue","store","isString","isArray","settings","needErrorLog","errorLog","checkNeed","env","process","NODE_ENV","includes","config","errorHandler","err","vm","info","a","nextTick","dispatch","url","window","location","href","console","error"],"mappings":";;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,SAASC,QAAT,EAAmBC,OAAnB,QAAkC,kBAAlC;AACA,OAAOC,QAAP,MAAqB,YAArB,C,CAEA;AACA;;IACkBC,Y,GAAiBD,Q,CAA3BE,Q;;AAER,SAASC,SAAT,GAAqB;AACnB,MAAMC,GAAG,GAAGC,OAAO,CAACD,GAAR,CAAYE,QAAxB;;AACA,MAAIR,QAAQ,CAACG,YAAD,CAAZ,EAA4B;AAC1B,WAAOG,GAAG,KAAKH,YAAf;AACD;;AACD,MAAIF,OAAO,CAACE,YAAD,CAAX,EAA2B;AACzB,WAAOA,YAAY,CAACM,QAAb,CAAsBH,GAAtB,CAAP;AACD;;AACD,SAAO,KAAP;AACD;;AAED,IAAID,SAAS,EAAb,EAAiB;AACfP,EAAAA,GAAG,CAACY,MAAJ,CAAWC,YAAX,GAA0B,UAASC,GAAT,EAAcC,EAAd,EAAkBC,IAAlB,EAAwBC,CAAxB,EAA2B;AACrD;AACA;AACEjB,IAAAA,GAAG,CAACkB,QAAJ,CAAa,YAAM;AACjBjB,MAAAA,KAAK,CAACkB,QAAN,CAAe,sBAAf,EAAuC;AACrCL,QAAAA,GAAG,EAAHA,GADqC;AAErCC,QAAAA,EAAE,EAAFA,EAFqC;AAGrCC,QAAAA,IAAI,EAAJA,IAHqC;AAIrCI,QAAAA,GAAG,EAAEC,MAAM,CAACC,QAAP,CAAgBC;AAJgB,OAAvC;AAMAC,MAAAA,OAAO,CAACC,KAAR,CAAcX,GAAd,EAAmBE,IAAnB;AACD,KARD;AASD,GAZD;AAaD","sourcesContent":["import Vue from 'vue'\nimport store from '@/store'\nimport { isString, isArray } from '@/utils/validate'\nimport settings from '@/settings'\n\n// you can set in settings.js\n// errorLog:'production' | ['production', 'development']\nconst { errorLog: needErrorLog } = settings\n\nfunction checkNeed() {\n  const env = process.env.NODE_ENV\n  if (isString(needErrorLog)) {\n    return env === needErrorLog\n  }\n  if (isArray(needErrorLog)) {\n    return needErrorLog.includes(env)\n  }\n  return false\n}\n\nif (checkNeed()) {\n  Vue.config.errorHandler = function(err, vm, info, a) {\n  // Don't ask me why I use Vue.nextTick, it just a hack.\n  // detail see https://forum.vuejs.org/t/dispatch-in-vue-config-errorhandler-has-some-problem/23500\n    Vue.nextTick(() => {\n      store.dispatch('errorLog/addErrorLog', {\n        err,\n        vm,\n        info,\n        url: window.location.href\n      })\n      console.error(err, info)\n    })\n  }\n}\n"]}]}