{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-1a28a91c\"],{\"08d1\":function(e,a,t){},\"1d88\":function(e,a,t){\"use strict\";var r=t(\"fd93\"),l=t.n(r);l.a},\"1ff0\":function(e,a,t){\"use strict\";var r=t(\"ede0\"),l=t.n(r);l.a},\"2b9a\":function(e,a,t){\"use strict\";var r=t(\"b5bd\"),l=t.n(r);l.a},\"401c\":function(e,a,t){\"use strict\";t.r(a);var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"section\",[t(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"新增接口\",params:{project_id:this.$route.params.project_id,addForm:this.form}}}},[t(\"el-button\",{staticClass:\"return-list\"},[e._v(\"快速新建API\")])],1),e._v(\" \"),t(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.formRules}},[t(\"el-col\",{staticClass:\"HOST\",attrs:{span:3}},[t(\"el-form-item\",{attrs:{prop:\"env\"}},[t(\"el-select\",{attrs:{placeholder:\"测试环境\"},model:{value:e.form.env,callback:function(a){e.$set(e.form,\"env\",a)},expression:\"form.env\"}},e._l(e.Host,(function(e,a){return t(\"el-option\",{key:a+\"\",attrs:{label:e.name,value:e.host}})})),1)],1)],1),e._v(\" \"),t(\"div\",{staticStyle:{border:\"1px solid #e6e6e6\",\"margin-bottom\":\"10px\",padding:\"15px\",\"padding-bottom\":\"0px\"}},[t(\"el-row\",{attrs:{gutter:10}},[t(\"el-col\",{attrs:{span:3}},[t(\"el-form-item\",[t(\"el-select\",{attrs:{placeholder:\"请选择类型\"},on:{change:e.typeChanged},model:{value:e.form.type,callback:function(a){e.$set(e.form,\"type\",a)},expression:\"form.type\"}},e._l(e.type,(function(e,a){return t(\"el-option\",{key:a+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(\" \"),t(\"el-col\",{attrs:{span:3}},[t(\"el-form-item\",[t(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:e.form.method,callback:function(a){e.$set(e.form,\"method\",a)},expression:\"form.method\"}},e._l(e.request,(function(e,a){return t(\"el-option\",{key:a+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(\" \"),t(\"el-col\",{attrs:{span:15}},[t(\"el-form-item\",{attrs:{prop:\"addr\"}},[t(\"el-input\",{attrs:{placeholder:\"地址\",\"auto-complete\":\"\"},on:{change:e.addrChanged},model:{value:e.form.addr,callback:function(a){e.$set(e.form,\"addr\",\"string\"===typeof a?a.trim():a)},expression:\"form.addr\"}})],1)],1),e._v(\" \"),t(\"el-col\",{attrs:{span:2}},[t(\"el-button\",{attrs:{type:\"primary\",loading:e.loadingSend},on:{click:e.fastTest}},[e._v(\"执行\")])],1)],1)],1),e._v(\" \"),t(\"el-row\",{attrs:{span:24}},[t(\"el-collapse\",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(a){e.activeNames=a},expression:\"activeNames\"}},[t(\"ApiRequest\",{ref:\"apiRequest\"}),e._v(\" \"),t(\"el-collapse-item\",{attrs:{title:\"响应结果\",name:\"4\"}},[t(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},[t(\"el-button\",{on:{click:e.showBody}},[e._v(\"Body\")]),e._v(\" \"),t(\"el-button\",{on:{click:e.showHeader}},[e._v(\"Head\")]),e._v(\" \"),t(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(a){e.format=!e.format}}},[e._v(\"格式转换\")])],1),e._v(\" \"),t(\"el-card\",{staticClass:\"box-card\"},[t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.format,expression:\"!format\"}],class:e.resultShow?\"parameter-a\":\"parameter-b\",model:{value:e.form.resultData,callback:function(a){e.$set(e.form,\"resultData\",a)},expression:\"form.resultData\"}},[t(\"div\",{staticStyle:{\"word-break\":\"break-all\",overflow:\"auto\",\"overflow-x\":\"hidden\"}},[e._v(e._s(e.form.resultData))])]),e._v(\" \"),t(\"div\",{class:e.resultShow?\"parameter-b\":\"parameter-a\",model:{value:e.form.resultHead,callback:function(a){e.$set(e.form,\"resultHead\",a)},expression:\"form.resultHead\"}},[e._v(e._s(e.form.resultHead))]),e._v(\" \"),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.format&&e.form.resultData,expression:\"format && form.resultData\"}],class:e.resultShow?\"parameter-a\":\"parameter-b\"},[t(\"json-viewer\",{attrs:{value:e.form.resultData,\"expand-depth\":5,copyable:\"\"}})],1),e._v(\" \"),t(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.form.resultData&&!e.form.resultHead,expression:\"!form.resultData&&!form.resultHead\"}],staticClass:\"raw\"},[e._v(\"暂无数据\")])])],1)],1)],1)],1)],1)},l=[],o=(t(\"7f7f\"),t(\"ac6a\"),t(\"7618\")),s=(t(\"1157\"),t(\"17ec\")),n=t(\"4ec3\"),i=t(\"dbb3\"),c=t(\"bc3a\"),u=t.n(c),p={components:{VuePopper:s[\"a\"],ApiRequest:i[\"a\"]},data:function(){return{type:[{value:\"http\",label:\"普通http\"},{value:\"jyb\",label:\"加油宝app\"},{value:\"service\",label:\"微服务\"}],request:[{value:\"get\",label:\"GET\"},{value:\"post\",label:\"POST\"},{value:\"put\",label:\"PUT\"},{value:\"delete\",label:\"DELETE\"}],Http:[{value:\"http\",label:\"HTTP\"},{value:\"https\",label:\"HTTPS\"}],loadingSend:!1,result:!0,activeNames:[\"2\",\"3\",\"4\"],Host:[{name:\"\",host:\"\"}],id:\"\",form:{url:\"\",method:\"POST\",http:\"HTTP\",type:\"http\",addr:\"\",contentType:\"\",statusCode:\"\",resultData:\"\",resultHead:\"\",parameters:[],parameter:{},headDic:{},headers:[]},formRules:{env:[{required:!1,message:\"请选择测试环境\",trigger:\"blur\"}],addr:[{required:!0,message:\"请输入地址\",trigger:\"blur\"}]},resultShow:!0,format:!1}},methods:{isJsonString:function(e){try{if(\"object\"===Object(o[\"a\"])(JSON.parse(e)))return!0}catch(a){}return!1},getHost:function(){var e=this;u.a.get(n[\"f\"]+\"/api/project/config_list\",{params:{project_id:this.$route.params.project_id,page:this.page,type:\"env\"},headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var t=a.data;\"999999\"===t.code?t.data.data.forEach((function(a){a.status&&e.Host.push(a)})):e.$message.error({message:t.msg,center:!0})})).catch((function(e){}))},fastTest:function(){var e=this;this.$refs.form.validate((function(a){if(a){e.loadingSend=!0;var t=e,r=e.$refs.apiRequest.head;t.form.statusCode=\"\",t.form.resultData=\"\",t.form.resultHead=\"\",t.form.headDic={},t.form.headers=[];for(var l=0;l<r.length;l++){var o=r[l][\"name\"];o&&(t.form.headDic[o]=r[l][\"value\"],t.form.headers.push({name:o,value:r[l][\"value\"]}))}var s=t.form.addr,i=\"\";0===s.indexOf(\"http://\")||0===s.indexOf(\"https://\")?(i=s,\"\"!=t.form.env&&t.form.env):i=t.form.http+\"://\"+t.form.env+s,t.form.contentType=t.$refs.apiRequest.requestParameterType,t.form.parameter=t.$refs.apiRequest.getParameters(),t.form.parameters=t.$refs.apiRequest.parameters;var c={project_id:t.$route.params.project_id,type:t.form.type,method:t.form.method,contentType:t.form.contentType,url:i,headers:t.form.headDic,data:t.form.parameter};u.a.post(n[\"f\"]+\"/api/api/run_api\",c,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(e){var a=e.data;t.loadingSend=!1,t.form.statusCode=a[\"data\"][\"result\"][0],t.form.resultData=a[\"data\"][\"result\"][1],t.form.resultHead=a[\"data\"][\"result\"][2]})).catch((function(e){t.loadingSend=!1,t.$message.error({message:\"执行失败,请重试.\",center:!0})}))}}))},showBody:function(){this.resultShow=!0},showHeader:function(){this.resultShow=!1},handleChange:function(e){},typeChanged:function(){this.$refs.apiRequest.form.type=this.form.type},addrChanged:function(){this.$refs.apiRequest.form.addr=this.form.addr}},mounted:function(){this.$refs.apiRequest.addEmptyHead(),this.$refs.apiRequest.addEmptyParameter(),this.getHost()}},m=p,d=(t(\"1ff0\"),t(\"8a78\"),t(\"2877\")),f=Object(d[\"a\"])(m,r,l,!1,null,\"41dc112a\",null);a[\"default\"]=f.exports},\"8a78\":function(e,a,t){\"use strict\";var r=t(\"08d1\"),l=t.n(r);l.a},b5bd:function(e,a,t){},dbb3:function(e,a,t){\"use strict\";var r=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t(\"section\",[t(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.formRules}},[t(\"el-row\",{attrs:{span:24}},[t(\"el-collapse\",{model:{value:e.activeNames,callback:function(a){e.activeNames=a},expression:\"activeNames\"}},[t(\"el-collapse-item\",{attrs:{title:\"请求头部\",name:\"1\"}},[t(\"el-table\",{ref:\"multipleHeadTable\",attrs:{data:e.head,\"highlight-current-row\":\"\"},on:{\"selection-change\":e.selsChangeHead}},[t(\"el-table-column\",{attrs:{type:\"selection\",\"min-width\":\"5%\",label:\"头部\"}}),e._v(\" \"),t(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-select\",{attrs:{placeholder:\"head标签\",filterable:\"\"},model:{value:a.row.name,callback:function(t){e.$set(a.row,\"name\",t)},expression:\"scope.row.name\"}},e._l(e.header,(function(e,a){return t(\"el-option\",{key:a+\"\",attrs:{label:e.label,value:e.value}})})),1),e._v(\" \"),t(\"el-input\",{staticClass:\"selectInput\",attrs:{value:a.row.name,placeholder:\"请输入内容\"},model:{value:a.row.name,callback:function(t){e.$set(a.row,\"name\",\"string\"===typeof t?t.trim():t)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),t(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"40%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-input\",{attrs:{value:a.row.value,placeholder:\"请输入内容\"},model:{value:a.row.value,callback:function(t){e.$set(a.row,\"value\",\"string\"===typeof t?t.trim():t)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),t(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(t){return e.delHead(a.$index)}}}),e._v(\" \"),a.$index===e.head.length-1?t(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addEmptyHead}}):e._e()]}}])})],1)],1),e._v(\" \"),t(\"el-collapse-item\",{attrs:{title:\"请求参数\",name:\"2\"}},[t(\"div\",{staticStyle:{margin:\"5px\"}},[t(\"el-row\",{attrs:{span:24}},[t(\"el-col\",{attrs:{span:4}},[t(\"el-radio\",{attrs:{label:\"application/x-www-form-urlencoded\"},model:{value:e.requestParameterType,callback:function(a){e.requestParameterType=a},expression:\"requestParameterType\"}},[e._v(\"表单\")])],1),e._v(\" \"),t(\"el-col\",{attrs:{span:4}},[t(\"el-radio\",{attrs:{label:\"application/json\"},model:{value:e.requestParameterType,callback:function(a){e.requestParameterType=a},expression:\"requestParameterType\"}},[e._v(\"JSON\")])],1),e._v(\" \"),t(\"el-col\",{attrs:{span:4}},[t(\"el-radio\",{attrs:{label:\"raw\"},model:{value:e.requestParameterType,callback:function(a){e.requestParameterType=a},expression:\"requestParameterType\"}},[e._v(\"JSON源数据\")]),t(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"jyb\"===e.form.type,expression:\"form.type==='jyb'\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:e.jybDecodePost}},[e._v(\"解密\")])],1)],1)],1),e._v(\" \"),t(\"el-table\",{ref:\"multipleParameterTable\",class:e.ParameterType?\"parameter-a\":\"parameter-b\",attrs:{data:e.parameter,\"highlight-current-row\":\"\"},on:{\"selection-change\":e.selsChangeParameter}},[t(\"el-table-column\",{attrs:{type:\"selection\",\"min-width\":\"5%\",label:\"头部\"}}),e._v(\" \"),t(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-input\",{attrs:{value:a.row.name,placeholder:\"请输入参数值\"},model:{value:a.row.name,callback:function(t){e.$set(a.row,\"name\",\"string\"===typeof t?t.trim():t)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),t(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"40%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-input\",{attrs:{type:\"textarea\",rows:1,value:a.row.value,placeholder:\"请输入参数值\"},model:{value:a.row.value,callback:function(t){e.$set(a.row,\"value\",\"string\"===typeof t?t.trim():t)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),t(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(a){return[t(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(t){return e.delParameter(a.$index)}}}),e._v(\" \"),a.$index===e.parameter.length-1?t(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addEmptyParameter}}):e._e()]}}])})],1),e._v(\" \"),[t(\"el-input\",{class:e.ParameterType?\"parameter-b\":\"parameter-a\",attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:e.parameterRaw,callback:function(a){e.parameterRaw=\"string\"===typeof a?a.trim():a},expression:\"parameterRaw\"}})]],2)],1)],1)],1)],1)},l=[],o=(t(\"4917\"),t(\"3b2b\"),t(\"7f7f\"),t(\"ac6a\"),t(\"1157\")),s=t.n(o),n=t(\"4ec3\"),i=t(\"bc3a\"),c=t.n(i),u={name:\"ApiRequest\",data:function(){return{paramType:[{value:\"Int\",label:\"Int\"},{value:\"String\",label:\"String\"},{value:\"Object\",label:\"Object\"},{value:\"Array\",label:\"Array\"}],loadingSend:!1,header:[{value:\"Accept\",label:\"Accept\"},{value:\"Accept-Charset\",label:\"Accept-Charset\"},{value:\"Accept-Encoding\",label:\"Accept-Encoding\"},{value:\"Accept-Language\",label:\"Accept-Language\"},{value:\"Accept-Ranges\",label:\"Accept-Ranges\"},{value:\"Authorization\",label:\"Authorization\"},{value:\"Cache-Control\",label:\"Cache-Control\"},{value:\"Connection\",label:\"Connection\"},{value:\"Cookie\",label:\"Cookie\"},{value:\"Content-Length\",label:\"Content-Length\"},{value:\"Content-Type\",label:\"Content-Type\"},{value:\"Content-MD5\",label:\"Content-MD5\"},{value:\"Date\",label:\"Date\"},{value:\"Expect\",label:\"Expect\"},{value:\"From\",label:\"From\"},{value:\"Host\",label:\"Host\"},{value:\"If-Match\",label:\"If-Match\"},{value:\"If-Modified-Since\",label:\"If-Modified-Since\"},{value:\"If-None-Match\",label:\"If-None-Match\"},{value:\"If-Range\",label:\"If-Range\"},{value:\"If-Unmodified-Since\",label:\"If-Unmodified-Since\"},{value:\"Max-Forwards\",label:\"Max-Forwards\"},{value:\"Origin\",label:\"Origin\"},{value:\"Pragma\",label:\"Pragma\"},{value:\"Proxy-Authorization\",label:\"Proxy-Authorization\"},{value:\"Range\",label:\"Range\"},{value:\"Referer\",label:\"Referer\"},{value:\"TE\",label:\"TE\"},{value:\"Upgrade\",label:\"Upgrade\"},{value:\"User-Agent\",label:\"User-Agent\"},{value:\"Via\",label:\"Via\"},{value:\"Warning\",label:\"Warning\"}],requestParameterType:\"application/json\",ParameterType:!0,radioType:\"\",result:!0,activeNames:[\"2\",\"3\",\"4\",\"5\"],id:\"\",head:[],parameter:[],parameterRaw:\"\",formRules:{},listLoading:!1,headers:\"\",parameters:\"\",format:!1,form:{type:\"http\",addr:\"\"}}},methods:{toggleHeadSelection:function(e){var a=this;e.forEach((function(e){a.$refs.multipleHeadTable.toggleRowSelection(e,!0)}))},toggleParameterSelection:function(e){var a=this;e.forEach((function(e){a.$refs.multipleParameterTable.toggleRowSelection(e,!0)}))},selsChangeParameter:function(e){this.parameters=e},selsChangeHead:function(e){this.headers=e},addEmptyHead:function(){var e={name:\"\",value:\"\"};this.addHead(e)},addHead:function(e){this.head.push(e);var a=[this.head[this.head.length-1]];this.toggleHeadSelection(a)},delHead:function(e){1!==this.head.length&&this.head.splice(e,1)},addEmptyParameter:function(){var e={name:\"\",value:\"\",required:\"True\",restrict:\"\",description:\"\"};this.addParameter(e)},addParameter:function(e){this.parameter.push(e);var a=[this.parameter[this.parameter.length-1]];this.toggleParameterSelection(a)},delParameter:function(e){1!==this.parameter.length&&this.parameter.splice(e,1)},getDataType:function(e){var a=\"String\";try{e instanceof Array?a=\"Array\":e instanceof Object?a=\"Object\":\"number\"==typeof e&&(a=\"Int\")}catch(t){}return a},getParameters:function(){var e={};if(\"application/x-www-form-urlencoded\"===this.requestParameterType||\"application/json\"===this.requestParameterType||\"text/plain\"===this.requestParameterType)for(var a=0;a<this.parameters.length;a++){var t=this.parameters[a][\"name\"];if(t){var r=this.getDataType(this.parameters[a][\"value\"]);e[t]=\"Object\"==r||\"Array\"==r?JSON.parse(this.parameters[a][\"value\"]):this.parameters[a][\"value\"]}}else e=this.parameterRaw;return e},changeParameterType:function(){if(\"application/json\"===this.requestParameterType){if(this.ParameterType=!0,\"\"!=this.parameterRaw&&(\"\"==this.parameters||1==this.parameters.length&&\"\"==this.parameters[0][\"name\"]))try{var e=this;this.parameter.splice(0);var a=JSON.parse(this.parameterRaw);s.a.each(a,(function(a,t){\"string\"!=typeof t&&(t=JSON.stringify(t));var r={name:a,value:t,required:\"True\",restrict:\"\",description:\"\"};e.addParameter(r)}))}catch(n){console.log(n)}}else if(\"application/x-www-form-urlencoded\"===this.requestParameterType||\"text/plain\"===this.requestParameterType)this.ParameterType=!0;else if(\"raw\"===this.requestParameterType&&(this.ParameterType=!1,\"\"!=this.parameters&&\"\"==this.parameterRaw))try{for(var t={},r=0;r<this.parameters.length;r++){var l=this.parameters[r][\"name\"];if(l){var o=this.getDataType(this.parameters[r][\"value\"]);t[l]=\"Object\"==o||\"Array\"==o?JSON.parse(this.parameters[r][\"value\"]):this.parameters[r][\"value\"]}}this.parameterRaw=JSON.stringify(t)}catch(n){console.log(n)}},jybDecodePost:function(){var e=this.parameterRaw.trim();if(\"\"!=e){var a=this.form.addr.trim(),t=0,r=new RegExp(\"(^|&)_pos=([^&]*)(&|$)\",\"i\"),l=a.match(r);null!=l&&(t=unescape(l[2]));var o=\"\";r=new RegExp(\"(^|&)ver=([^&]*)(&|$)\",\"i\"),l=a.match(r),null!=l&&(o=unescape(l[2]));var s={pos:t,post:e,version:o},i={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")},u=this;c.a.post(n[\"f\"]+\"/api/api/jybdecode\",s,{headers:i}).then((function(e){var a=e.data,t=a.msg,r=a.code,l=a.data;\"999999\"===r?u.parameterRaw=JSON.stringify(l):u.$message.error({message:t,center:!0})}))}}},watch:{requestParameterType:function(){this.changeParameterType()}},mounted:function(){this.toggleHeadSelection(this.head),this.toggleParameterSelection(this.parameter)}},p=u,m=(t(\"2b9a\"),t(\"1d88\"),t(\"2877\")),d=Object(m[\"a\"])(p,r,l,!1,null,\"b85b79f0\",null);a[\"a\"]=d.exports},ede0:function(e,a,t){},fd93:function(e,a,t){}}]);","extractedComments":[]}