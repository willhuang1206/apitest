{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-113fd858\"],{\"6bcb\":function(e,t,a){},\"6fc6\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"section\",[a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"基础信息\",params:{project_id:this.$route.params.project_id,api_id:this.$route.params.api_id}}}},[a(\"el-button\",{staticClass:\"return-list\"},[a(\"i\",{staticClass:\"el-icon-d-arrow-left\",staticStyle:{\"margin-right\":\"5px\"}}),e._v(\"接口详情\")])],1),e._v(\" \"),a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"基础信息\",params:{project_id:this.$route.params.project_id,api_id:this.$route.params.api_id}}}},[a(\"el-button\",{staticClass:\"return-list\",staticStyle:{float:\"right\"}},[e._v(\"取消\")])],1),e._v(\" \"),a(\"el-button\",{staticClass:\"return-list\",staticStyle:{float:\"right\",\"margin-right\":\"15px\"},attrs:{type:\"primary\"},nativeOn:{click:function(t){return e.updateApiInfo(t)}}},[e._v(\"保存\")]),e._v(\" \"),a(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.FormRules}},[a(\"div\",{staticStyle:{border:\"1px solid #e6e6e6\",\"margin-bottom\":\"10px\",padding:\"15px\"}},[a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"接口分组:\",\"label-width\":\"83px\",prop:\"firstGroup\"}},[a(\"treeselect\",{attrs:{options:e.group,placeholder:\"请选择\"},model:{value:e.form.firstGroup,callback:function(t){e.$set(e.form,\"firstGroup\",t)},expression:\"form.firstGroup\"}})],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:10}},[a(\"el-form-item\",{attrs:{label:\"接口类型:\",\"label-width\":\"83px\",prop:\"type\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择类型\"},model:{value:e.form.type,callback:function(t){e.$set(e.form,\"type\",t)},expression:\"form.type\"}},e._l(e.type,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"接口名称:\",\"label-width\":\"83px\",prop:\"name\"}},[a(\"el-input\",{attrs:{placeholder:\"名称\",\"auto-complete\":\"\"},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",\"string\"===typeof t?t.trim():t)},expression:\"form.name\"}})],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:10}},[a(\"el-form-item\",{attrs:{label:\"状态:\",\"label-width\":\"72px\"}},[a(\"el-select\",{attrs:{placeholder:\"接口状态\"},model:{value:e.form.status,callback:function(t){e.$set(e.form,\"status\",t)},expression:\"form.status\"}},e._l(e.status,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:6}},[a(\"el-form-item\",{attrs:{label:\"URL:\",\"label-width\":\"83px\"}},[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:e.form.method,callback:function(t){e.$set(e.form,\"method\",t)},expression:\"form.method\"}},e._l(e.request,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:18}},[a(\"el-form-item\",{attrs:{prop:\"addr\"}},[a(\"el-input\",{attrs:{placeholder:\"地址\",\"auto-complete\":\"\"},model:{value:e.form.addr,callback:function(t){e.$set(e.form,\"addr\",\"string\"===typeof t?t.trim():t)},expression:\"form.addr\"}})],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:18}},[a(\"el-form-item\",{attrs:{label:\"接口描述:\",\"label-width\":\"83px\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:3,placeholder:\"接口描述\"},model:{value:e.form.description,callback:function(t){e.$set(e.form,\"description\",\"string\"===typeof t?t.trim():t)},expression:\"form.description\"}})],1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{span:24}},[a(\"el-collapse\",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{attrs:{title:\"请求头部\",name:\"1\"}},[a(\"el-table\",{attrs:{data:e.form.head,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"head标签\",filterable:\"\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",a)},expression:\"scope.row.name\"}},e._l(e.header,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1),e._v(\" \"),a(\"el-input\",{staticClass:\"selectInput\",attrs:{value:t.row.name,placeholder:\"请输入内容\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"30%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.value,placeholder:\"请输入内容\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delHead(t.$index)}}}),e._v(\" \"),t.$index===e.form.head.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addHead}}):e._e()]}}])})],1)],1),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"请求参数\",name:\"2\"}},[a(\"div\",{staticStyle:{margin:\"5px\"}},[a(\"el-row\",{attrs:{span:24}},[a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"application/x-www-form-urlencoded\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"表单\")])],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"application/json\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"JSON\")])],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"raw\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"JSON源数据\")]),a(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"jyb\"===e.form.type,expression:\"form.type==='jyb'\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:e.jybDecodePost}},[e._v(\"解密\")])],1)],1)],1),e._v(\" \"),a(\"el-table\",{class:e.ParameterType?\"parameter-a\":\"parameter-b\",attrs:{data:e.form.parameter,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.name,placeholder:\"请输入参数值\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"25%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{type:\"textarea\",rows:1,value:t.row.value,placeholder:\"请输入参数值\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"_type\",label:\"参数类型\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:t.row._type,callback:function(a){e.$set(t.row,\"_type\",a)},expression:\"scope.row._type\"}},e._l(e.paramType,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"必填?\",\"min-width\":\"10%\",prop:\"required\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"必填？\"},model:{value:t.row.required,callback:function(a){e.$set(t.row,\"required\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.required\"}},e._l(e.required4,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"description\",label:\"参数说明\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.desc,placeholder:\"请输入参数说明\"},model:{value:t.row.description,callback:function(a){e.$set(t.row,\"description\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.description\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delParameter(t.$index)}}}),e._v(\" \"),t.$index===e.form.parameter.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addParameter}}):e._e()]}}])})],1),e._v(\" \"),[a(\"el-input\",{class:e.ParameterType?\"parameter-b\":\"parameter-a\",attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:e.parameterRaw,callback:function(t){e.parameterRaw=\"string\"===typeof t?t.trim():t},expression:\"parameterRaw\"}})]],2),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"返回参数\",name:\"3\"}},[a(\"el-table\",{attrs:{data:e.form.response,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.name,placeholder:\"请输入参数值\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"预期值\",\"min-width\":\"25%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.value,placeholder:\"请输入参数值\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"_type\",label:\"参数类型\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:t.row._type,callback:function(a){e.$set(t.row,\"_type\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row._type\"}},e._l(e.paramType,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"必含?\",\"min-width\":\"10%\",prop:\"required\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"必填？\"},model:{value:t.row.required,callback:function(a){e.$set(t.row,\"required\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.required\"}},e._l(e.required4,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"description\",label:\"参数说明\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.desc,placeholder:\"请输入参数说明\"},model:{value:t.row.description,callback:function(a){e.$set(t.row,\"description\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.description\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delResponse(t.$index)}}}),e._v(\" \"),t.$index===e.form.response.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addResponse}}):e._e()]}}])})],1)],1),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"返回样例\",name:\"4\"}},[a(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:e.formatResponse}},[e._v(\"格式转换\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:e.updateResponse}},[e._v(\"生成返回参数\")])],1),e._v(\" \"),a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.format,expression:\"!format\"}],model:{value:e.form.mockData,callback:function(t){e.$set(e.form,\"mockData\",t)},expression:\"form.mockData\"}},[a(\"el-input\",{attrs:{value:e.form.mockData,type:\"textarea\",rows:5,placeholder:\"返回样例\"},model:{value:e.form.mockData,callback:function(t){e.$set(e.form,\"mockData\",t)},expression:\"form.mockData\"}})],1),e._v(\" \"),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.format,expression:\"format\"}]},[a(\"json-viewer\",{attrs:{value:e.form.mockJsonData,\"expand-depth\":5,copyable:\"\"}})],1),e._v(\" \"),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.form.mockData,expression:\"!form.mockData\"}],staticClass:\"raw\"},[e._v(\"暂无数据\")])])],1)],1)],1)],1)],1)},o=[],l=(a(\"4917\"),a(\"3b2b\"),a(\"c5f6\"),a(\"ac6a\"),a(\"a481\"),a(\"7f7f\"),a(\"7618\")),s=a(\"ca17\"),n=a.n(s),i=(a(\"542c\"),a(\"4ec3\")),p=a(\"1157\"),c=a.n(p),u=a(\"bc3a\"),m=a.n(u),d={components:{Treeselect:n.a},data:function(){return{type:[{value:\"http\",label:\"普通http\"},{value:\"jyb\",label:\"加油宝app\"},{value:\"service\",label:\"微服务\"}],request:[{value:\"GET\",label:\"GET\"},{value:\"POST\",label:\"POST\"},{value:\"PUT\",label:\"PUT\"},{value:\"DELETE\",label:\"DELETE\"}],Http:[{value:\"HTTP\",label:\"HTTP\"},{value:\"HTTPS\",label:\"HTTPS\"}],paramType:[{value:\"Int\",label:\"Int\"},{value:\"String\",label:\"String\"},{value:\"Object\",label:\"Object\"},{value:\"Array\",label:\"Array\"}],checkHeadList:[],checkParameterList:[],ParameterType:!0,group:[],requestParameterType:\"application/x-www-form-urlencoded\",status:[{value:!0,label:\"启用\"},{value:!1,label:\"禁用\"}],header:[{value:\"Accept\",label:\"Accept\"},{value:\"Accept-Charset\",label:\"Accept-Charset\"},{value:\"Accept-Encoding\",label:\"Accept-Encoding\"},{value:\"Accept-Language\",label:\"Accept-Language\"},{value:\"Accept-Ranges\",label:\"Accept-Ranges\"},{value:\"Authorization\",label:\"Authorization\"},{value:\"Cache-Control\",label:\"Cache-Control\"},{value:\"Connection\",label:\"Connection\"},{value:\"Cookie\",label:\"Cookie\"},{value:\"Content-Length\",label:\"Content-Length\"},{value:\"Content-Type\",label:\"Content-Type\"},{value:\"Content-MD5\",label:\"Content-MD5\"},{value:\"Date\",label:\"Date\"},{value:\"Expect\",label:\"Expect\"},{value:\"From\",label:\"From\"},{value:\"Host\",label:\"Host\"},{value:\"If-Match\",label:\"If-Match\"},{value:\"If-Modified-Since\",label:\"If-Modified-Since\"},{value:\"If-None-Match\",label:\"If-None-Match\"},{value:\"If-Range\",label:\"If-Range\"},{value:\"If-Unmodified-Since\",label:\"If-Unmodified-Since\"},{value:\"Max-Forwards\",label:\"Max-Forwards\"},{value:\"Origin\",label:\"Origin\"},{value:\"Pragma\",label:\"Pragma\"},{value:\"Proxy-Authorization\",label:\"Proxy-Authorization\"},{value:\"Range\",label:\"Range\"},{value:\"Referer\",label:\"Referer\"},{value:\"TE\",label:\"TE\"},{value:\"Upgrade\",label:\"Upgrade\"},{value:\"User-Agent\",label:\"User-Agent\"},{value:\"Via\",label:\"Via\"},{value:\"Warning\",label:\"Warning\"}],header4:\"\",addParameterFormVisible:!1,addResponseFormVisible:!1,required4:[{value:!0,label:\"是\"},{value:!1,label:\"否\"}],httpCode:[{value:\"\",label:\"\"},{value:\"200\",label:\"200\"},{value:\"404\",label:\"404\"},{value:\"400\",label:\"400\"},{value:\"500\",label:\"500\"},{value:\"502\",label:\"502\"},{value:\"302\",label:\"302\"}],radioType:\"\",result:!0,activeNames:[\"2\",\"3\",\"4\"],id:\"\",parameterRaw:\"\",form:{firstGroup:null,name:\"\",type:\"http\",status:\"True\",method:\"GET\",http:\"HTTP\",addr:\"\",head:[{name:\"\",value:\"\"}],parameter:[{name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"}],parameterType:\"\",response:[{name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"}],mockCode:\"\",mockData:\"\",mockJsonData:\"\",description:\"\"},FormRules:{name:[{required:!0,message:\"请输入名称\",trigger:\"blur\"},{max:50,message:\"不能超过50个字\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择类型\",trigger:\"blur\"}],addr:[{required:!0,message:\"请输入地址\",trigger:\"blur\"}],required:[{required:!0,message:\"是否必须\",trigger:\"blur\"}],firstGroup:[{type:\"number\",required:!0,message:\"请选择分组\",trigger:\"blur\"}]},editForm:{name:\"\",value:\"\",required:\"\",restrict:\"\",description:\"\"},format:!1}},methods:{isJsonString:function(e){try{if(\"object\"===Object(l[\"a\"])(JSON.parse(e)))return!0}catch(t){}return!1},getApiInfo:function(){var e=this;m.a.get(i[\"f\"]+\"/api/api/api_info\",{params:{project_id:e.$route.params.project_id,api_id:e.$route.params.api_id}}).then((function(t){var a=t.data;if(\"999999\"===a.code){a=a.data,e.id=a.id,e.form.name=a.name,e.form.type=a.type,a.status?e.form.status=!0:e.form.status=!1,e.form.method=a.requestType,e.form.http=a.httpType,e.form.addr=a.apiAddress,a.headers.length&&(e.form.head=a.headers);try{e.parameterRaw=a.requestParameterRaw.data.replace(/'/g,'\"').replace(/None/g,\"null\").replace(/True/g,\"true\").replace(/False/g,\"false\")}catch(r){}a.requestParameter.length&&(e.form.parameter=a.requestParameter),e.form.parameterType=a.requestParameterType,e.requestParameterType=e.form.parameterType,a.response.length&&(e.form.response=a.response),e.form.mockCode=a.mockCode,e.form.mockData=a.data,a.data&&(e.form.mockJsonData=JSON.parse(a.data)),e.form.description=a.description,e.form.firstGroup=a.apiGroupLevelFirst}else e.$message.error({message:a.msg,center:!0})})).catch((function(e){}))},updateApiInfo:function(){this.form.mockData&&this.form.mockCode?this.isJsonString(this.form.mockData)?this.updateApi():this.$message({message:\"mock格式错误\",center:!0,type:\"error\"}):this.updateApi()},updateApi:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=e;e.$confirm(\"确认提交吗？\",\"提示\",{}).then((function(){a.form.parameterType=a.requestParameterType;var e=a.form.parameterType,t={},r={};\"application/x-www-form-urlencoded\"===e||\"application/json\"===e||\"text/plain\"===e?!0===a.radioType?(e=\"raw\",a.form.parameter.forEach((function(e){e.name&&(t[e.name]=e.value),e.required&&(\"Object\"==e._type||\"Array\"==e._type?r[e.name]=JSON.parse(e.value):r[e.name]=e.value)})),t=JSON.stringify(t)):(t=a.form.parameter,a.form.parameter.forEach((function(e){e.required&&(\"Object\"==e._type||\"Array\"==e._type?r[e.name]=JSON.parse(e.value):r[e.name]=e.value)}))):t=a.parameterRaw;var o=JSON.stringify({project_id:Number(a.$route.params.project_id),id:Number(a.$route.params.api_id),apiGroupLevelFirst_id:Number(a.form.firstGroup),name:a.form.name,type:a.form.type,httpType:a.form.http,requestType:a.form.method,apiAddress:a.form.addr,status:a.form.status,headDict:a.form.head,requestParameterType:e,requestList:t,responseList:a.form.response,mockCode:a.form.mockCode,data:a.form.mockData,description:a.form.description,params:JSON.stringify(r)});a.parameterRaw&&\"raw\"===e?a.isJsonString(a.parameterRaw)?m.a.post(i[\"f\"]+\"/api/api/update_api\",o,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(e){var t=e.data;\"999999\"===t.code?(a.$router.push({name:\"基础信息\",params:{project_id:a.$route.params.project_id,api_id:a.$route.params.api_id}}),a.$message({message:\"修改成功\",center:!0,type:\"success\"})):a.$message.error({message:t.msg,center:!0})})).catch((function(e){})):a.$message({message:\"源数据格式错误\",center:!0,type:\"error\"}):m.a.post(i[\"f\"]+\"/api/api/update_api\",o,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(e){var t=e.data;\"999999\"===t.code?(a.$router.push({name:\"基础信息\",params:{project_id:a.$route.params.project_id,api_id:a.$route.params.api_id}}),a.$message({message:\"修改成功\",center:!0,type:\"success\"})):a.$message.error({message:t.msg,center:!0})})).catch((function(e){}))})).catch((function(){}))}}))},editParameterSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&(e.form.parameter[e.id]=e.editForm,e.addParameterFormVisible=!1)}))},handleParameterEdit:function(e,t){this.addParameterFormVisible=!0,this.id=e,this.editForm=Object.assign({},t)},editResponseSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&(e.form.response[e.id]=e.editForm,e.addResponseFormVisible=!1)}))},handleResponseEdit:function(e,t){this.addResponseFormVisible=!0,this.id=e,this.editForm=Object.assign({},t)},back:function(){this.$router.go(-1)},getApiGroupAndInfo:function(){var e=this,t=this;m.a.get(i[\"f\"]+\"/api/api/group\",{params:{project_id:this.$route.params.project_id},headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var r=a.data;\"999999\"===r.code?t.group=r.data:t.$message.error({message:r.msg,center:!0}),e.getApiInfo()})).catch((function(e){}))},addHead:function(){var e={name:\"\",value:\"\"};this.form.head.push(e)},delHead:function(e){this.form.head.splice(e,1),0===this.form.head.length&&this.form.head.push({name:\"\",value:\"\"})},addParameter:function(){var e={name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"};this.form.parameter.push(e)},delParameter:function(e){this.form.parameter.splice(e,1),0===this.form.parameter.length&&this.form.parameter.push({name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"})},addResponse:function(){var e={name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"};this.form.response.push(e)},delResponse:function(e){this.form.response.splice(e,1),0===this.form.response.length&&this.form.response.push({name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"})},changeParameterType:function(){if(\"application/json\"===this.requestParameterType){if(this.ParameterType=!0,\"\"!=this.parameterRaw&&(0==this.form.parameter.length||\"\"==this.form.parameter[0][\"name\"]))try{var e=this;this.form.parameter=[];var t=JSON.parse(this.parameterRaw);c.a.each(t,(function(t,a){var r=\"String\";\"object\"==Object(l[\"a\"])(a)?(a instanceof Array?r=\"Array\":a instanceof Object&&(r=\"Object\"),a=JSON.stringify(a)):\"number\"==typeof a&&(r=\"Int\");var o={name:t,value:a,_type:r,required:\"True\",restrict:\"\",description:\"\"};e.form.parameter.push(o)}))}catch(a){alert(a)}}else\"application/x-www-form-urlencoded\"===this.requestParameterType||\"text/plain\"===this.requestParameterType?this.ParameterType=!0:this.ParameterType=!1},showData:function(){this.result=!0},showHead:function(){this.result=!1},handleChange:function(e){},onSubmit:function(){console.log(\"submit!\")},formatResponse:function(){if(!this.format&&\"\"!=this.form.mockData)try{this.form.mockJsonData=JSON.parse(this.form.mockData)}catch(e){}this.format=!this.format},getDataType:function(e){var t=\"String\";try{e instanceof Array?t=\"Array\":e instanceof Object?t=\"Object\":\"number\"==typeof e&&(t=\"Int\")}catch(a){}return t},updateResponse:function(){var e=this;this.$confirm(\"确认根据返回样例生成返回参数吗？\",\"提示\",{}).then((function(){e.form.response=[];try{var t=JSON.parse(e.form.mockData);\"number\"!=typeof t&&e.convertResponse(\"\",t,2)}catch(a){alert(a)}})).catch((function(){}))},convertResponse:function(e,t,a){var r=this;c.a.each(t,(function(t,o){var l={required:!0,description:\"\"};try{l[\"name\"]=\"\"!=e?e+\".\"+t:t;var s=r.getDataType(o);if(\"String\"==s||\"Int\"==s)l[\"_type\"]=s,l[\"value\"]=o,r.form.response.push(l);else if(\"Array\"==s){l[\"_type\"]=s;var n=r.getDataType(o[0]);\"String\"==n||\"Int\"==n?(l[\"value\"]=JSON.stringify(o),r.form.response.push(l)):\"Object\"==n&&(l[\"value\"]=\"[]\",r.form.response.push(l),a>0&&r.convertResponse(l[\"name\"]+\"[*]\",o[0],a-1))}else\"Object\"==s&&(l[\"_type\"]=s,l[\"value\"]=\"{}\",r.form.response.push(l),a>0&&r.convertResponse(l[\"name\"],o,a-1))}catch(i){alert(i.message)}}))},getValue:function(e){this.form.firstGroup=e},jybDecodePost:function(){var e=this.parameterRaw.trim();if(\"\"!=e){var t=this.form.addr.trim(),a=0,r=new RegExp(\"(^|&)_pos=([^&]*)(&|$)\",\"i\"),o=t.match(r);null!=o&&(a=unescape(o[2]));var l=\"\";r=new RegExp(\"(^|&)ver=([^&]*)(&|$)\",\"i\"),o=t.match(r),null!=o&&(l=unescape(o[2]));var s={pos:a,post:e,version:l},n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")},p=this;m.a.post(i[\"f\"]+\"/api/api/jybdecode\",s,{headers:n}).then((function(e){var t=e.data,a=t.msg,r=t.code,o=t.data;\"999999\"===r?p.parameterRaw=JSON.stringify(o):p.$message.error({message:a,center:!0})}))}}},watch:{requestParameterType:function(){this.changeParameterType()}},mounted:function(){this.getApiGroupAndInfo()}},f=d,v=(a(\"77fd\"),a(\"c951\"),a(\"2877\")),h=Object(v[\"a\"])(f,r,o,!1,null,\"4e4e38d5\",null);t[\"default\"]=h.exports},\"77fd\":function(e,t,a){\"use strict\";var r=a(\"b77f\"),o=a.n(r);o.a},b77f:function(e,t,a){},c951:function(e,t,a){\"use strict\";var r=a(\"6bcb\"),o=a.n(r);o.a}}]);","extractedComments":[]}