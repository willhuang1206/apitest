{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-37deb7b4\"],{a139:function(t,e,a){},de6a:function(t,e,a){\"use strict\";var i=a(\"a139\"),s=a.n(i);s.a},e3e6:function(t,e,a){\"use strict\";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"section\",[a(\"div\",{staticClass:\"main\"},[a(\"el-container\",[a(\"el-header\",[a(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.report.visible,expression:\"!report.visible\"}],staticClass:\"toolbar\",staticStyle:{\"padding-bottom\":\"0px\"},attrs:{span:24}},[a(\"el-form\",{attrs:{inline:!0,model:t.filters},nativeOn:{submit:function(t){t.preventDefault()}}},[t.global?a(\"el-form-item\",[a(\"el-select\",{attrs:{placeholder:\"项目\"},model:{value:t.project_id,callback:function(e){t.project_id=e},expression:\"project_id\"}},[a(\"el-option\",{attrs:{label:\"所有项目\",value:\"\"}}),t._v(\" \"),t._l(t.projectlist,(function(t,e){return a(\"el-option\",{key:e+\"\",attrs:{label:t.name,value:t.id}})}))],2)],1):t._e(),t._v(\" \"),a(\"el-form-item\",[a(\"el-select\",{attrs:{placeholder:\"类型\"},model:{value:t.type,callback:function(e){t.type=e},expression:\"type\"}},t._l(t.listType,(function(t,e){return a(\"el-option\",{attrs:{label:t.label,value:t.value}})})),1)],1),t._v(\" \"),a(\"el-form-item\",{attrs:{prop:\"timeArray\"}},[a(\"el-date-picker\",{attrs:{format:\"yyyy-MM-dd\",\"value-format\":\"yyyy-MM-dd\",type:\"daterange\",\"picker-options\":t.pickerOptions,\"range-separator\":\"至\",\"start-placeholder\":\"开始时间\",\"end-placeholder\":\"结束时间\",align:\"right\"},model:{value:t.filters.testtime,callback:function(e){t.$set(t.filters,\"testtime\",e)},expression:\"filters.testtime\"}})],1),t._v(\" \"),a(\"el-form-item\",[a(\"el-button\",{attrs:{type:\"primary\"},on:{click:function(e){return t.handleSearch(t.type)}}},[t._v(\"查询\")])],1)],1)],1),t._v(\" \"),a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.report.visible,expression:\"report.visible\"}]},[a(\"el-col\",{staticClass:\"inline\",attrs:{span:5}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(t._s(t.report.data.name))])])],1),t._v(\" \"),a(\"el-col\",{staticClass:\"inline\",attrs:{span:3}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(t._s(t.report.data.env))])])],1),t._v(\" \"),a(\"el-col\",{staticClass:\"inline\",attrs:{span:4}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(t._s(t.report.data.testTime))])])],1),t._v(\" \"),a(\"el-col\",{staticClass:\"inline\",attrs:{span:3}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"PASS\"===t.report.data.status,expression:\"report.data.status==='PASS'\"}],staticStyle:{color:\"#11b95c\"}},[t._v(\"测试通过\")]),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"FAIL\"===t.report.data.status,expression:\"report.data.status==='FAIL'\"}],staticStyle:{color:\"#cc0000\"}},[t._v(\"测试失败\")])])])],1),t._v(\" \"),a(\"el-col\",{staticClass:\"inline\",attrs:{span:3}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(\"执行用例\"+t._s(t.report.data.totalCount)+\"个\")])])],1),t._v(\" \"),a(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"FAIL\"===t.report.data.status,expression:\"report.data.status==='FAIL'\"}],staticClass:\"inline\",attrs:{span:2}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(\"失败\"+t._s(t.report.data.failCount)+\"个\")])])],1),t._v(\" \"),a(\"el-col\",{staticClass:\"inline\",attrs:{span:3}},[a(\"el-card\",{staticClass:\"box-card\"},[a(\"h3\",[a(\"i\",{}),t._v(\"耗时\"+t._s(t.report.data.duration)+\"秒\")])])],1)],1)],1),t._v(\" \"),a(\"el-main\",[a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.report.visible,expression:\"!report.visible\"}]},[a(\"el-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.autoChart.visible,expression:\"autoChart.visible\"}],staticClass:\"box-card\"},[a(\"div\",{staticStyle:{height:\"376px\"},attrs:{id:\"autoChart\"}})])],1),t._v(\" \"),a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.report.visible,expression:\"!report.visible\"}]},[a(\"el-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.publishChart.visible,expression:\"publishChart.visible\"}],staticClass:\"box-card\"},[a(\"div\",{staticStyle:{height:\"376px\"},attrs:{id:\"publishChart\"}})])],1),t._v(\" \"),a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.report.visible,expression:\"!report.visible\"}]},[a(\"el-col\",{attrs:{span:12}},[a(\"el-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.failChart.visible,expression:\"failChart.visible\"}],staticClass:\"box-card\"},[a(\"div\",{staticStyle:{height:\"376px\"},attrs:{id:\"failTypeChart\"}})])],1),t._v(\" \"),a(\"el-col\",{attrs:{span:12}},[a(\"el-card\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.failChart.visible,expression:\"failChart.visible\"}],staticClass:\"box-card\"},[a(\"div\",{staticStyle:{height:\"376px\"},attrs:{id:\"failSeverityChart\"}})])],1)],1),t._v(\" \"),a(\"el-row\",[a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.detailTable.loading,expression:\"detailTable.loading\"},{name:\"show\",rawName:\"v-show\",value:t.detailTable.visible,expression:\"detailTable.visible\"}],attrs:{data:t.detailTable.list,\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"row-style\":t.tableRowStyle}},[a(\"el-table-column\",{attrs:{type:\"expand\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-table\",{staticStyle:{width:\"100%\"},attrs:{data:e.row.details,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{type:\"expand\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-form\",{staticClass:\"demo-table-expand\",attrs:{\"label-position\":\"left\",inline:\"\"}},[a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"api\"===e.row.type,expression:\"props.row.type==='api'\"}],attrs:{gutter:10}},[a(\"el-form-item\",{attrs:{label:\"接口地址： \"}},[a(\"span\",[t._v(t._s(e.row.url))])])],1),t._v(\" \"),a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"api\"===e.row.type,expression:\"props.row.type==='api'\"}],attrs:{gutter:10}},[a(\"el-form-item\",{attrs:{label:\"请求方式： \"}},[a(\"span\",[t._v(t._s(e.row.method))])])],1),t._v(\" \"),a(\"el-row\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"api\"===e.row.type,expression:\"props.row.type==='api'\"}],attrs:{gutter:10}},[a(\"el-form-item\",{attrs:{label:\"请求参数： \"}},[a(\"span\",{staticStyle:{\"word-break\":\"break-all\",overflow:\"auto\",\"overflow-x\":\"hidden\"}},[t._v(t._s(e.row.data))])])],1),t._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-form-item\",{attrs:{label:\"返回结果： \"}},[a(\"span\",[a(\"code\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"api\"!==e.row.type,expression:\"props.row.type!=='api'\"}]},[t._v(t._s(e.row.result))]),t._v(\" \"),a(\"json-viewer\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"api\"===e.row.type,expression:\"props.row.type==='api'\"}],attrs:{value:e.row.result,\"expand-depth\":5,boxed:\"\",copyable:\"\"}})],1)])],1)],1)]}}],null,!0)}),t._v(\" \"),a(\"el-table-column\",{attrs:{type:\"index\",width:\"55\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\",\"min-width\":\"20%\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[t._v(t._s(e.row.name))])]}}],null,!0)}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"result\",label:\"返回结果\",\"min-width\":\"40%\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[t._v(t._s(e.row.result))])]}}],null,!0)}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"status\",label:\"执行状态\",\"min-width\":\"10%\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"PASS\"===e.row.status,expression:\"scope.row.status==='PASS'\"}],staticStyle:{color:\"#11b95c\",cursor:\"pointer\"}},[t._v(\"成功\")]),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"FAIL\"===e.row.status,expression:\"scope.row.status==='FAIL'\"}],staticStyle:{color:\"#cc0000\",cursor:\"pointer\"}},[t._v(\"失败\")])]}}],null,!0)}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"description\",label:\"描述\",\"min-width\":\"30%\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{staticStyle:{\"font-size\":\"16px\"}},[t._v(t._s(e.row.description))])]}}],null,!0)})],1)]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{type:\"index\",label:\"#\",width:\"100\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"步骤名称\",\"min-width\":\"20%\",sortable:\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",[t._v(t._s(e.row.name))])]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"testTime\",label:\"测试时间\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"duration\",label:\"执行时间(毫秒)\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"result\",label:\"执行结果\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"PASS\"===e.row.result,expression:\"scope.row.result==='PASS'\"}],staticStyle:{color:\"#11b95c\"}},[t._v(\"PASS\")]),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"FAIL\"===e.row.result,expression:\"scope.row.result==='FAIL'\"}],staticStyle:{color:\"#cc0000\",cursor:\"pointer\"},on:{click:function(e){return t.handleUpdateFail(t.detailTable.parentResult)}}},[t._v(\"FAIL\")])]}}])})],1),t._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.resultTable.loading,expression:\"resultTable.loading\"},{name:\"show\",rawName:\"v-show\",value:t.resultTable.visible,expression:\"resultTable.visible\"}],attrs:{data:t.resultTable.list,stripe:\"\",border:\"\",\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"row-style\":t.tableRowStyle}},[a(\"el-table-column\",{attrs:{type:\"index\",label:\"#\",width:\"100\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\",\"min-width\":\"20%\",sortable:\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-icon\",{attrs:{name:\"name\"}}),t._v(\" \"),\"case\"===t.type?a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\"},attrs:{to:{name:\"自动化执行详情\",params:{project_id:t.project_id,automation_id:e.row.automation_id,trace:e.row.trace}}}},[t._v(t._s(e.row.name))]):t._e(),t._v(\" \"),\"case\"!==t.type?a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\"},attrs:{to:{name:\"自动化任务执行结果\",params:{project_id:t.project_id,trace:e.row.trace}}}},[t._v(t._s(e.row.name))]):t._e()]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"testTime\",label:\"测试时间\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"env\",label:\"环境\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"duration\",label:\"执行时间(毫秒)\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"result\",label:\"测试结果\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"PASS\"===e.row.result,expression:\"scope.row.result==='PASS'\"}],staticStyle:{color:\"#11b95c\"}},[t._v(\"PASS\")]),t._v(\" \"),a(\"span\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"FAIL\"===e.row.result,expression:\"scope.row.result==='FAIL'\"}],staticStyle:{color:\"#cc0000\",cursor:\"pointer\"},attrs:{title:e.row.failDetail},on:{click:function(a){return t.handleUpdateFail(e.row)}}},[t._v(\"FAIL\"),e.row.failType?a(\"span\",[t._v(\"(\"+t._s(t.failType[e.row.failType])+\"原因)\")]):t._e()])]}}])}),t._v(\" \"),\"case\"===t.type?a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\"},attrs:{to:{name:\"自动化步骤列表\",params:{automation_id:e.row.automation_id}}}},[a(\"el-button\",{attrs:{type:\"primary\",size:\"small\"}},[t._v(\"查看用例\")])],1)]}}],null,!1,3566405741)}):t._e()],1),t._v(\" \"),a(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.resultTable.visible,expression:\"resultTable.visible\"}],staticClass:\"toolbar\",attrs:{span:24}},[a(\"el-pagination\",{staticStyle:{float:\"right\"},attrs:{layout:\"total, prev, pager, next\",\"current-page\":t.resultTable.page,\"page-size\":t.resultTable.pageSize,\"page-count\":t.resultTable.pages,total:t.resultTable.total},on:{\"current-change\":t.handleResultPage,\"update:currentPage\":function(e){return t.$set(t.resultTable,\"page\",e)},\"update:current-page\":function(e){return t.$set(t.resultTable,\"page\",e)}}})],1),t._v(\" \"),a(\"el-table\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.summaryTable.visible,expression:\"summaryTable.visible\"},{name:\"loading\",rawName:\"v-loading\",value:t.summaryTable.loading,expression:\"summaryTable.loading\"}],staticStyle:{width:\"100%\"},attrs:{data:t.summaryTable.list,stripe:\"\",border:\"\",\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"automation_id\",label:\"ID\",\"min-width\":\"5%\",sortable:\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"自动化名称\",\"min-width\":\"20%\",sortable:\"\",\"show-overflow-tooltip\":\"\"},scopedSlots:t._u([{key:\"default\",fn:function(e){return[a(\"el-icon\",{attrs:{name:\"name\"}}),t._v(\" \"),a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\"},attrs:{to:{name:\"自动化执行结果\",params:{project_id:t.project_id,automation_id:e.row.automation_id}}}},[t._v(t._s(e.row.name))])]}}])}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"total\",label:\"执行总数\",\"min-width\":\"10%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"passed\",label:\"执行成功\",\"min-width\":\"10%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"passRate\",label:\"通过率(%)\",\"min-width\":\"10%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"duration\",label:\"执行总时间(毫秒)\",\"min-width\":\"10%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}})],1),t._v(\" \"),a(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.summaryTable.visible,expression:\"summaryTable.visible\"}],staticClass:\"toolbar\",attrs:{span:24}},[a(\"el-pagination\",{staticStyle:{float:\"right\"},attrs:{layout:\"total, prev, pager, next\",\"page-size\":t.summaryTable.pageSize,\"current-page\":t.summaryTable.page,\"page-count\":t.summaryTable.pages,total:t.summaryTable.total},on:{\"current-change\":t.handleSummaryPage,\"update:currentPage\":function(e){return t.$set(t.summaryTable,\"page\",e)},\"update:current-page\":function(e){return t.$set(t.summaryTable,\"page\",e)}}})],1),t._v(\" \"),a(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:t.apiAutomatedTable.loading,expression:\"apiAutomatedTable.loading\"},{name:\"show\",rawName:\"v-show\",value:t.apiAutomatedTable.visible,expression:\"apiAutomatedTable.visible\"}],attrs:{data:t.apiAutomatedTable.list,stripe:\"\",border:\"\",\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"row-style\":t.tableRowStyle}},[a(\"el-table-column\",{attrs:{type:\"index\",label:\"#\",width:\"100\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"name\",label:\"名称\",\"min-width\":\"20%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"num\",label:\"关联自动化数\",\"min-width\":\"15%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}}),t._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"automationName\",label:\"关联自动化用例\",\"min-width\":\"30%\",sortable:\"\",\"show-overflow-tooltip\":\"\"}})],1),t._v(\" \"),a(\"el-col\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.apiAutomatedTable.visible,expression:\"apiAutomatedTable.visible\"}],staticClass:\"toolbar\",attrs:{span:24}},[a(\"el-pagination\",{staticStyle:{float:\"right\"},attrs:{layout:\"total, prev, pager, next\",\"current-page\":t.apiAutomatedTable.page,\"page-size\":20,\"page-count\":t.apiAutomatedTable.pages,total:t.apiAutomatedTable.total},on:{\"current-change\":t.handleApiAutomatedTablePage,\"update:currentPage\":function(e){return t.$set(t.apiAutomatedTable,\"page\",e)},\"update:current-page\":function(e){return t.$set(t.apiAutomatedTable,\"page\",e)}}})],1)],1)],1)],1),t._v(\" \"),a(\"el-dialog\",{attrs:{width:\"40%\",title:\"错误详情\",visible:t.failForm.visible,\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){return t.$set(t.failForm,\"visible\",e)}}},[a(\"el-form\",{ref:\"failForm\",attrs:{model:t.failForm.data,rules:t.failForm.rules,\"label-width\":\"80px\"}},[a(\"el-form-item\",{attrs:{label:\"类型\",\"label-width\":\"83px\",prop:\"type\"}},[a(\"el-select\",{attrs:{placeholder:\"类型\"},model:{value:t.failForm.data.type,callback:function(e){t.$set(t.failForm.data,\"type\",e)},expression:\"failForm.data.type\"}},t._l(t.failType,(function(t,e){return a(\"el-option\",{attrs:{label:t,value:e}})})),1)],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"严重等级\",\"label-width\":\"83px\",prop:\"severity\"}},[a(\"el-select\",{attrs:{placeholder:\"严重等级\"},model:{value:t.failForm.data.severity,callback:function(e){t.$set(t.failForm.data,\"severity\",e)},expression:\"failForm.data.severity\"}},t._l(t.severity,(function(t,e){return a(\"el-option\",{key:e+\"\",attrs:{label:t.label,value:t.value}})})),1)],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"根源\",prop:\"cause\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:2},model:{value:t.failForm.data.cause,callback:function(e){t.$set(t.failForm.data,\"cause\",\"string\"===typeof e?e.trim():e)},expression:\"failForm.data.cause\"}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"详情\",prop:\"detail\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:2},model:{value:t.failForm.data.detail,callback:function(e){t.$set(t.failForm.data,\"detail\",\"string\"===typeof e?e.trim():e)},expression:\"failForm.data.detail\"}})],1),t._v(\" \"),a(\"el-form-item\",{attrs:{label:\"关联缺陷\",prop:\"bug\"}},[a(\"el-input\",{attrs:{type:\"input\"},model:{value:t.failForm.data.bug,callback:function(e){t.$set(t.failForm.data,\"bug\",\"string\"===typeof e?e.trim():e)},expression:\"failForm.data.bug\"}})],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{nativeOn:{click:function(e){t.failForm.visible=!1}}},[t._v(\"取消\")]),t._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",loading:t.failForm.loading},nativeOn:{click:function(e){return t.updateFailSubmit(e)}}},[t._v(\"提交\")])],1)],1)],1)])},s=[],l=(a(\"6b54\"),a(\"ac6a\"),a(\"7f7f\"),a(\"4ec3\")),r=(a(\"1157\"),a(\"bc3a\")),o=a.n(r),n={name:\"automation-report\",data:function(){return{project_id:this.$route.params.project_id,automation_id:this.$route.params.automation_id,type:\"autoChart\",global:!1,report:{visible:!1,data:{}},filters:{name:\"\",testtime:this.defaultDate(),start_time:\"\",end_time:\"\",project:\"\"},projectlist:[],listType:[{value:\"autoChart\",label:\"用例执行统计\"},{value:\"apiChart\",label:\"接口执行统计\"},{value:\"publish\",label:\"发布项目统计\"},{value:\"case\",label:\"用例执行情况\"},{value:\"task\",label:\"任务执行情况\"},{value:\"apiAutomated\",label:\"接口覆盖统计\"},{value:\"dynamicChart\",label:\"项目动态统计\"}],summaryTable:{loading:!1,visible:!1,list:[],page:1,pages:0,total:0,pageSize:20},resultTable:{loading:!1,visible:!1,list:[],page:1,pages:0,total:0,pageSize:20},detailTable:{loading:!1,visible:!1,list:[],parentResult:null},apiAutomatedTable:{loading:!1,visible:!1,list:[],page:1,pages:0,total:0},stepTable:{visible:!1,list:[],name:\"\"},autoChart:{visible:!1},publishChart:{visible:!1},failChart:{visible:!1},failType:{code:\"编码\",env:\"环境\",data:\"数据\",other:\"其他\"},severity:[{value:\"fatal\",label:\"致命的\"},{value:\"critical\",label:\"严重的\"},{value:\"major\",label:\"一般的\"},{value:\"minor\",label:\"微小的\"}],failForm:{visible:!1,loading:!1,data:{id:\"\",type:\"code\",severity:\"major\",cause:\"\",detail:\"\",bug:\"\"},row:null,rules:{type:[{required:!0,message:\"请选择类型\",trigger:\"blur\"}],severity:[{required:!0,message:\"请选择严重等级\",trigger:\"blur\"}],cause:[{required:!0,message:\"请输入根源\",trigger:\"blur\"},{max:256,message:\"不能超过256个字符\",trigger:\"blur\"}],detail:[{required:!0,message:\"请输入详情\",trigger:\"blur\"},{max:1024,message:\"不能超过1024个字符\",trigger:\"blur\"}],bug:[{max:50,message:\"不能超过50个字符\",trigger:\"blur\"}]}},pickerOptions:{shortcuts:[{text:\"今天\",onClick:function(t){var e=new Date,a=new Date;t.$emit(\"pick\",[a,e])}},{text:\"昨天\",onClick:function(t){var e=new Date;e.setDate(e.getDate()-1);var a=new Date;a.setDate(a.getDate()-1),t.$emit(\"pick\",[a,e])}},{text:\"本周\",onClick:function(t){var e=new Date,a=e.getDay()||7,i=new Date;i.setDate(i.getDate()-a+1),t.$emit(\"pick\",[i,e])}},{text:\"上周\",onClick:function(t){var e=new Date,a=e.getDay()||7;e.setDate(e.getDate()-a);var i=new Date;i.setDate(e.getDate()-6),t.$emit(\"pick\",[i,e])}},{text:\"最近一周\",onClick:function(t){var e=new Date,a=new Date;a.setDate(a.getDate()-6),t.$emit(\"pick\",[a,e])}},{text:\"本月\",onClick:function(t){var e=new Date,a=new Date;a.setDate(1),t.$emit(\"pick\",[a,e])}},{text:\"最近一个月\",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-25056e5),t.$emit(\"pick\",[a,e])}},{text:\"最近三个月\",onClick:function(t){var e=new Date,a=new Date;a.setTime(a.getTime()-76896e5),t.$emit(\"pick\",[a,e])}},{text:\"今年\",onClick:function(t){var e=new Date,a=new Date;a.setMonth(0),a.setDate(1),t.$emit(\"pick\",[a,e])}}]}}},methods:{tableRowStyle:function(t){return\"ERROR\"===t.result||\"FAIL\"===t.result?\"background-color: #DC143C;\":\"TimeOut\"===t.result?\"background-color: #FFE4C4;\":void 0},filterHandler:function(t,e,a){return e.result===t},handleSearch:function(t){this.apiAutomatedTable.visible=!1,this.publishChart.visible=!1,\"case\"==t?(this.summaryTable.page=1,this.autoChart.visible=!1,this.failChart.visible=!1,this.viewAutomationSummary()):\"autoChart\"==t?(this.autoChart.visible=!0,this.failChart.visible=!0,this.viewAutomationChart(),this.viewAutomationSummary()):\"apiChart\"==t?(this.autoChart.visible=!0,this.failChart.visible=!1,this.viewApiChart()):\"dynamicChart\"==t?(this.autoChart.visible=!0,this.failChart.visible=!1,this.viewDynamicChart()):\"publish\"==t?(this.resultTable.page=1,this.autoChart.visible=!0,this.publishChart.visible=!0,this.failChart.visible=!1,this.viewPublishChart(),this.viewAutomationResult(t,\"\")):\"task\"==t?(this.resultTable.page=1,this.autoChart.visible=!1,this.failChart.visible=!1,this.viewAutomationResult(t,\"\")):\"apiAutomated\"==t&&(this.apiAutomatedTable.page=1,this.autoChart.visible=!1,this.failChart.visible=!1,this.viewApiAutomated())},viewAutomationSummary:function(){\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\"),this.summaryTable.visible=!0,this.resultTable.visible=!1,this.detailTable.visible=!1,this.summaryTable.loading=!0;var t=this,e={project_id:this.project_id,name:this.filters.name,start_time:this.filters.start_time,end_time:this.filters.end_time,page:t.summaryTable.page};\"\"!=this.filters.start_time&&\"\"!=this.filters.end_time?(t.summaryTable.pageSize=500,e[\"page_size\"]=t.summaryTable.pageSize):(t.summaryTable.pageSize=20,e[\"page_size\"]=t.summaryTable.pageSize),o.a.get(l[\"f\"]+\"/api/report/automation_summary\",{params:e,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(e){var a=e.data;t.summaryTable.loading=!1,\"999999\"===a.code?(t.summaryTable.total=a.data.total,t.summaryTable.pages=a.data.pages,t.summaryTable.list=[],a.data.data.forEach((function(e){e[\"passRate\"]=parseFloat((100*e[\"passed\"]/e[\"total\"]).toFixed(1)),t.summaryTable.list.push(e)}))):t.$message.error({message:a.msg,center:!0})})).catch((function(t){}))},viewAutomationChart:function(){var t=this;\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\");var e=this,a={project_id:this.project_id,start_time:this.filters.start_time,end_time:this.filters.end_time};o.a.get(l[\"f\"]+\"/api/report/automation_chart\",{params:a,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var i=a.data;\"999999\"===i.code?(t.autoChart.visible=!0,t.drawbar(i.data.autoChart,\"autoChart\",\"用例执行统计\",\"bar\"),i.data.failTypeChart.line_name.length>0?(t.failChart.visible=!0,t.drawpie(i.data.failTypeChart,\"failTypeChart\",\"失败类型\"),t.drawpie(i.data.failSeverityChart,\"failSeverityChart\",\"失败严重等级\")):t.failChart.visible=!1):e.$message.error({message:i.msg,center:!0})})).catch((function(t){}))},viewPublishChart:function(){var t=this;\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\"),this.summaryTable.visible=!1,this.resultTable.visible=!1,this.detailTable.visible=!1,this.summaryTable.loading=!0;var e=this,a={project_id:this.project_id,start_time:this.filters.start_time,end_time:this.filters.end_time};o.a.get(l[\"f\"]+\"/api/report/publish_chart\",{params:a,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var i=a.data;\"999999\"===i.code?(t.autoChart.visible=!0,t.drawbar(i.data.publish_chart,\"autoChart\",\"发布项目统计-按日期\",\"bar\"),t.publishChart.visible=!0,t.drawpie(i.data.publish_pie,\"publishChart\",\"发布项目\")):e.$message.error({message:i.msg,center:!0})})).catch((function(t){}))},viewApiChart:function(){var t=this;\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\"),this.summaryTable.visible=!1,this.resultTable.visible=!1,this.detailTable.visible=!1,this.summaryTable.loading=!0;var e=this,a={project_id:this.project_id,start_time:this.filters.start_time,end_time:this.filters.end_time};o.a.get(l[\"f\"]+\"/api/report/api_chart\",{params:a,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var i=a.data;\"999999\"===i.code?(t.autoChart.visible=!0,t.drawbar1(i.data,\"autoChart\",\"接口执行统计\",\"bar\")):e.$message.error({message:i.msg,center:!0})})).catch((function(t){}))},viewDynamicChart:function(){var t=this;\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\"),this.summaryTable.visible=!1,this.resultTable.visible=!1,this.detailTable.visible=!1,this.summaryTable.loading=!0;var e=this,a={project_id:this.project_id,start_time:this.filters.start_time,end_time:this.filters.end_time};o.a.get(l[\"f\"]+\"/api/report/dynamic_chart\",{params:a,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){var i=a.data;\"999999\"===i.code?(t.autoChart.visible=!0,t.drawbar1(i.data,\"autoChart\",\"项目动态统计\",\"bar\")):e.$message.error({message:i.msg,center:!0})})).catch((function(t){}))},drawbar:function(t,e,a,i){var s=this.$echarts.init(document.getElementById(e));s.clear();var l={title:{text:a},tooltip:{trigger:\"axis\"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:[\"line\",\"bar\"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:[\"执行数\",\"通过率\"]},xAxis:[{type:\"category\",data:t.line_name,axisLabel:{interval:0,rotate:30},axisPointer:{type:\"shadow\"}}],yAxis:[{type:\"value\",name:\"执行数\"},{type:\"value\",name:\"通过率\",min:0,max:100,interval:20,axisLabel:{formatter:\"{value}%\"}}],series:[{name:\"执行数\",type:i,itemStyle:{normal:{label:{show:!0,position:\"top\"}}},data:t.line_x},{name:\"通过率\",type:\"line\",smooth:!0,yAxisIndex:1,itemStyle:{normal:{color:\"#26B99A\",label:{show:!0,position:\"top\"}}},data:t.line_x1}]};s.setOption(l)},drawbar1:function(t,e,a,i){var s=this.$echarts.init(document.getElementById(e));s.clear();var l={title:{text:a},tooltip:{trigger:\"axis\"},toolbox:{show:!0,feature:{mark:{show:!0},dataView:{show:!0,readOnly:!1},magicType:{show:!0,type:[\"line\",\"bar\"]},restore:{show:!0},saveAsImage:{show:!0}}},calculable:!0,legend:{data:[\"执行数\"]},xAxis:[{type:\"category\",data:t.line_name,axisLabel:{interval:0,rotate:30},axisPointer:{type:\"shadow\"}}],yAxis:[{type:\"value\",name:\"执行数\"}],series:[{name:\"执行数\",type:i,itemStyle:{normal:{color:\"#7cb5ec\",label:{show:!0,position:\"top\"}}},data:t.line_x}]};s.setOption(l)},drawpie:function(t,e,a){var i=this.$echarts.init(document.getElementById(e));i.clear();var s={title:{text:a+\"统计\"},tooltip:{trigger:\"item\",formatter:\"{a} <br/>{b} : {c} ({d}%)\"},legend:{left:\"center\",data:t.line_name},series:[{name:a,type:\"pie\",radius:\"55%\",center:[\"50%\",\"60%\"],data:t.line_data,label:{formatter:\"{b} : {c} ({d}%)\"},emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:\"rgba(0, 0, 0, 0.5)\"}}}]};i.setOption(s)},viewApiAutomated:function(){this.summaryTable.visible=!1,this.resultTable.visible=!1,this.detailTable.visible=!1,this.apiAutomatedTable.visible=!0,this.apiAutomatedTable.loading=!0;var t={project_id:this.project_id,page:this.apiAutomatedTable.page},e=l[\"f\"]+\"/api/report/apiautomatedcoverage\",a=this;o.a.get(e,{params:t,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(t){var e=t.data;a.apiAutomatedTable.loading=!1,\"999999\"===e.code?(a.apiAutomatedTable.list=e.data.data,a.apiAutomatedTable.pages=e.data.pages,a.apiAutomatedTable.total=e.data.total):a.$message.error({message:e.msg,center:!0})})).catch((function(t){}))},viewAutomationResult:function(t,e){this.type=t,\"\"!=this.filters.testtime&&null!=this.filters.testtime?(this.filters.start_time=this.filters.testtime[0],this.filters.end_time=this.filters.testtime[1]):(this.filters.start_time=\"\",this.filters.end_time=\"\"),this.summaryTable.visible=!1,this.resultTable.visible=!0,this.detailTable.visible=!1,this.resultTable.loading=!0;var a={project_id:this.project_id,start_time:this.filters.start_time,end_time:this.filters.end_time,page:this.resultTable.page,type:this.type},i=l[\"f\"]+\"/api/report/automation_result\";\"case\"==this.type?\"\"!=e?(a[\"automation_id\"]=e,this.automation_id=e):this.$route.params.trace?a[\"trace\"]=this.$route.params.trace:(a[\"automation_id\"]=e,this.automation_id=a[\"automation_id\"]):i=l[\"f\"]+\"/api/report/automations_result\";var s=this;o.a.get(i,{params:a,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(t){var e=t.data;s.resultTable.loading=!1,\"999999\"===e.code?(s.resultTable.list=e.data.data,s.resultTable.pages=e.data.pages,s.resultTable.total=e.data.total,s.resultTable.pageSize=e.data.page_size,e.data.report&&(s.report.visible=!0,s.report.data=e.data.report)):s.$message.error({message:e.msg,center:!0})})).catch((function(t){}))},viewAutomationDetail:function(t,e){this.summaryTable.visible=!1,this.resultTable.visible=!1,this.detailTable.visible=!0,this.detailTable.loading=!0;var a=this,i={automation_id:t,trace:e};o.a.get(l[\"f\"]+\"/api/report/automation_detail\",{params:i,headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(t){var e=t.data;a.detailTable.loading=!1,\"999999\"===e.code?(a.detailTable.list=e.data.results,a.detailTable.parentResult=e.data.parentResult):a.$message.error({message:e.msg,center:!0})})).catch((function(t){}))},handleSummaryPage:function(t){this.summaryTable.page=t,this.viewAutomationSummary()},handleApiAutomatedTablePage:function(t){this.apiAutomatedTable.page=t,this.viewApiAutomated()},handleResultPage:function(t){this.resultTable.page=t,this.$route.params.automation_id?this.viewAutomationResult(this.type,this.$route.params.automation_id):this.viewAutomationResult(this.type,\"\")},defaultDate:function(){var t=new Date,e=t.getFullYear().toString(),a=t.getMonth()+1<10?\"0\"+(t.getMonth()+1).toString():(t.getMonth()+1).toString(),i=t.getDate()<10?\"0\"+t.getDate().toString():t.getDate().toString(),s=e+\"-\"+a+\"-\"+i,l=e+\"-\"+a+\"-01\";return[l,s]},handleUpdateFail:function(t){this.failForm.visible=!0,this.failForm.data={id:t.id,type:t.failType,severity:t.failSeverity,cause:t.failCause,detail:t.failDetail,bug:t.failBug},this.failForm.row=t},updateFailSubmit:function(){var t=this;this.$refs.failForm.validate((function(e){e&&t.$confirm(\"确认提交吗？\",\"提示\",{}).then((function(){var e=t,a=JSON.stringify({project_id:t.$route.params.project_id,result_id:t.failForm.data.id,type:t.failForm.data.type,severity:t.failForm.data.severity,cause:t.failForm.data.cause,detail:t.failForm.data.detail,bug:t.failForm.data.bug});o.a.post(l[\"f\"]+\"/api/report/updateresultfaildetail\",a,{headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(a){a.data;\"999999\"===a.data.code?(e.failForm.visible=!1,e.failForm.row.failType=t.failForm.data.type,e.failForm.row.failSeverity=t.failForm.data.severity,e.failForm.row.failCause=t.failForm.data.cause,e.failForm.row.failDetail=t.failForm.data.detail,e.failForm.row.failBug=t.failForm.data.bug,e.$message({message:\"更新成功\",center:!0,type:\"success\"})):e.$message.error({message:a.data.msg,center:!0})})).catch((function(t){}))})).catch((function(){}))}))},getProjectList:function(){this.listLoading=!0;var t=this,e={page:1,page_size:100,status:!0},a={Authorization:\"Token \"+sessionStorage.getItem(\"token\")};o.a.get(\"\".concat(l[\"f\"],\"/api/project/project_list\"),{params:e,headers:a}).then((function(e){var a=e.data,i=a.msg,s=a.code,l=a.data;\"999999\"===s?t.projectlist=l.data:t.$message.error({message:i,center:!0})}))},init:function(){this.autoChart.visible=!1,this.failChart.visible=!1,this.$route.params.project_id?(this.project_id=this.$route.params.project_id,this.global=!1):(this.global=!0,this.getProjectList()),this.$route.params.automation_id?(this.automation_id=this.$route.params.automation_id,this.$route.params.trace?this.viewAutomationDetail(this.$route.params.automation_id,this.$route.params.trace):this.viewAutomationResult(\"case\",this.automation_id)):this.$route.params.trace&&this.viewAutomationResult(\"case\",\"\")}},mounted:function(){this.init()},watch:{$route:function(t,e){t.query!=e.query&&this.init()}}},u=n,m=(a(\"de6a\"),a(\"2877\")),p=Object(m[\"a\"])(u,i,s,!1,null,\"1436c973\",null);e[\"default\"]=p.exports}}]);","extractedComments":[]}