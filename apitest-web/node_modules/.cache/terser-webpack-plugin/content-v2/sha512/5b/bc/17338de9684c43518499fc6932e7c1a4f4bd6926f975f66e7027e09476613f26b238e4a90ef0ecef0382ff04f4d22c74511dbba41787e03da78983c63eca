{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-0df98d83\"],{\"6d64\":function(t,e,a){\"use strict\";var o=a(\"828e\"),n=a.n(o);n.a},\"6eaf\":function(t,e,a){\"use strict\";var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"div\",{staticClass:\"navMenu\"},[t._l(t.navMenus,(function(e){return[e.children?t._e():a(\"el-menu-item\",{key:e.id,attrs:{data:e,index:e.id,route:e.value}},[a(\"template\",{slot:\"title\"},[t._v(t._s(e.label)+\"\\n         \"),a(\"el-dropdown\",{staticClass:\"editGroup\",staticStyle:{\"margin-right\":\"10%\"},attrs:{trigger:\"hover\"}},[a(\"i\",{staticClass:\"el-icon-more\"}),t._v(\" \"),a(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleAdd(e.id)}}},[t._v(\"新增\")]),t._v(\" \"),a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleEdit(e.id,e.label)}}},[t._v(\"修改\")]),t._v(\" \"),a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleDel(e.id)}}},[t._v(\"删除\")])],1)],1)],1)],2),t._v(\" \"),e.children?a(\"el-submenu\",{key:e.id,attrs:{data:e,index:e.id,route:e.value}},[a(\"template\",{slot:\"title\"},[a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\"},attrs:{to:e.value}},[a(\"span\",[t._v(t._s(e.label))])]),t._v(\" \"),a(\"el-dropdown\",{staticClass:\"editGroup\",staticStyle:{\"margin-right\":\"10%\"},attrs:{trigger:\"hover\"}},[a(\"i\",{staticClass:\"el-icon-more\"}),t._v(\" \"),a(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleAdd(e.id)}}},[t._v(\"新增\")]),t._v(\" \"),a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleEdit(e.id,e.label)}}},[t._v(\"修改\")]),t._v(\" \"),a(\"el-dropdown-item\",{nativeOn:{click:function(a){return t.handleDel(e.id)}}},[t._v(\"删除\")])],1)],1)],1),t._v(\" \"),a(\"NavMenu\",{attrs:{navMenus:e.children},on:{handleAdd:t.handleAdd,handleEdit:t.handleEdit,handleDel:t.handleDel}})],2):t._e()]}))],2)},n=[],r={name:\"NavMenu\",props:[\"navMenus\"],data:function(){return{}},methods:{handleAdd:function(t){this.$emit(\"handleAdd\",t)},handleEdit:function(t,e){this.$emit(\"handleEdit\",t,e)},handleDel:function(t){this.$emit(\"handleDel\",t)}}},i=r,s=a(\"2877\"),d=Object(s[\"a\"])(i,o,n,!1,null,\"dc7a202e\",null);e[\"a\"]=d.exports},\"828e\":function(t,e,a){},9979:function(t,e,a){\"use strict\";a.r(e);var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a(\"section\",[a(\"el-row\",{staticClass:\"row-title\",attrs:{span:24}},[a(\"el-col\",{attrs:{span:5}},[a(\"el-button\",{staticClass:\"addGroup\",on:{click:function(e){return t.handleAddGroup(0)}}},[t._v(\"新增分组\")]),t._v(\" \"),a(\"div\",{staticClass:\"api-title\"},[a(\"strong\",[t._v(\"自动化分组\")])]),t._v(\" \"),a(\"div\",{staticClass:\"api-title\",staticStyle:{cursor:\"pointer\"}},[a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"自动化列表\",params:{project_id:this.$route.params.project_id}}}},[t._v(\"\\n                    所有自动化\\n                \")])],1),t._v(\" \"),a(\"aside\",[a(\"el-menu\",{staticClass:\"el-menu-vertical-demo\",attrs:{\"default-active\":\"0\",router:\"\"}},[a(\"NavMenu\",{attrs:{navMenus:t.groupData},on:{handleAdd:t.handleAddGroup,handleEdit:t.handleEditGroup,handleDel:t.handleDelGroup}})],1)],1)],1),t._v(\" \"),a(\"el-dialog\",{staticStyle:{width:\"60%\",left:\"20%\"},attrs:{title:t.GroupForm.title,visible:t.GroupForm.visible,\"close-on-click-modal\":!1},on:{\"update:visible\":function(e){return t.$set(t.GroupForm,\"visible\",e)}}},[a(\"el-form\",{ref:\"GroupForm\",attrs:{model:t.GroupForm.data,\"label-width\":\"80px\",rules:t.GroupForm.rules}},[a(\"el-form-item\",{attrs:{label:\"分组名称\",prop:\"name\"}},[a(\"el-input\",{staticStyle:{width:\"90%\"},attrs:{\"auto-complete\":\"off\"},model:{value:t.GroupForm.data.name,callback:function(e){t.$set(t.GroupForm.data,\"name\",\"string\"===typeof e?e.trim():e)},expression:\"GroupForm.data.name\"}})],1)],1),t._v(\" \"),a(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[a(\"el-button\",{nativeOn:{click:function(e){t.GroupForm.visible=!1}}},[t._v(\"取消\")]),t._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",loading:t.GroupForm.loading},nativeOn:{click:function(e){return t.GroupFormSubmit(e)}}},[t._v(\"提交\")])],1)],1),t._v(\" \"),a(\"el-col\",{attrs:{span:19}},[a(\"div\",{staticStyle:{\"margin-left\":\"10px\",\"margin-right\":\"20px\"}},[a(\"router-view\")],1)])],1)],1)},n=[],r=(a(\"7f7f\"),a(\"c5f6\"),a(\"4ec3\")),i=a(\"6eaf\"),s=(a(\"1157\"),a(\"bc3a\")),d=a.n(s),l={components:{NavMenu:i[\"a\"]},data:function(){return{project:\"\",groupData:[],GroupForm:{title:\"\",visible:!1,loading:!1,rules:{name:[{required:!0,message:\"请输入分组名称\",trigger:\"blur\"}]},data:{name:\"\",id:\"\",parentId:\"\"}},filters:{name:\"\"},api:[],total:0,page:1,listLoading:!1,sels:[],apiView:!0}},methods:{getAutomationGroup:function(){var t=this;d.a.get(r[\"f\"]+\"/api/automation/group\",{params:{project_id:Number(this.$route.params.project_id)},headers:{\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")}}).then((function(e){var a=e.data;\"999999\"===a.code?t.groupData=a.data:t.$message.error({message:a.msg,center:!0})})).catch((function(t){}))},handleAddGroup:function(t){this.GroupForm.visible=!0,this.GroupForm.title=\"新增分组\",this.GroupForm.data={name:\"\",id:\"\",parentId:t}},handleEditGroup:function(t,e){this.GroupForm.visible=!0,this.GroupForm.title=\"修改分组\",this.GroupForm.data.id=t,this.GroupForm.data={name:e,id:t,parentId:\"\"}},handleDelGroup:function(t){var e=this;this.$confirm(\"确认删除该分组吗?\",\"提示\",{type:\"warning\"}).then((function(){var a=e,o={id:Number(t),project_id:Number(e.$route.params.project_id)},n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};d.a.post(\"\".concat(r[\"f\"],\"/api/automation/del_group\"),o,{headers:n}).then((function(t){var e=t.data,o=e.msg,n=e.code;e.data;\"999999\"===n?a.$message({message:\"删除成功\",center:!0,type:\"success\"}):a.$message.error({message:o,center:!0}),a.getAutomationGroup()}))})).catch((function(){}))},GroupFormSubmit:function(){var t=this;this.$refs.GroupForm.validate((function(e){if(e){var a=t;t.$confirm(\"确认提交吗？\",\"提示\",{}).then((function(){a.GroupForm.loading=!0;var e={project_id:Number(t.$route.params.project_id),name:a.GroupForm.data.name},o=\"\";\"\"!=a.GroupForm.data.id?(o=\"\".concat(r[\"f\"],\"/api/automation/update_name_group\"),e[\"id\"]=a.GroupForm.data.id):(o=\"\".concat(r[\"f\"],\"/api/automation/add_group\"),e[\"parent_id\"]=a.GroupForm.data.parentId);var n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};d.a.post(o,e,{headers:n}).then((function(t){var e=t.data,o=e.msg,n=e.code;e.data;a.GroupForm.loading=!1,\"999999\"===n?(a.$message({message:\"执行成功\",center:!0,type:\"success\"}),a.$refs[\"GroupForm\"].resetFields(),a.GroupForm.visible=!1,a.getAutomationGroup()):\"999997\"===n?a.$message.error({message:o,center:!0}):(a.$message.error({message:o,center:!0}),a.$refs[\"GroupForm\"].resetFields(),a.GroupForm.visible=!1,a.getAutomationGroup())}))})).catch((function(){}))}}))}},mounted:function(){this.getAutomationGroup(),this.project=this.$route.params.project_id}},u=l,c=(a(\"6d64\"),a(\"2877\")),p=Object(c[\"a\"])(u,o,n,!1,null,\"01d0b1e2\",null);e[\"default\"]=p.exports}}]);","extractedComments":[]}