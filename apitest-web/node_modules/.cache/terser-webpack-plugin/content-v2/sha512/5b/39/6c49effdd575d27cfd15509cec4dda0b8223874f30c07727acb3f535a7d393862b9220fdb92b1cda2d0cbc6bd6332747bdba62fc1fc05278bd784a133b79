{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-d27f273c\"],{\"0350\":function(e,t,a){\"use strict\";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"div\",{staticClass:\"app-container\"},[s(\"div\",{staticClass:\"filter-container\"},[s(\"el-input\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"名称\"},nativeOn:{keyup:function(t){return!t.type.indexOf(\"key\")&&e._k(t.keyCode,\"enter\",13,t.key,\"Enter\")?null:e.handleSearch(t)}},model:{value:e.filters.name,callback:function(t){e.$set(e.filters,\"name\",t)},expression:\"filters.name\"}}),e._v(\" \"),s(\"el-select\",{staticClass:\"filter-item\",staticStyle:{width:\"200px\"},attrs:{placeholder:\"业务板块\",clearable:\"\"},model:{value:e.filters.businessline,callback:function(t){e.$set(e.filters,\"businessline\",t)},expression:\"filters.businessline\"}},e._l(e.businesslinelist,(function(e,t){return s(\"el-option\",{key:t+\"\",attrs:{label:e.name,value:e.name}})})),1),e._v(\" \"),s(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-search\"},on:{click:e.handleSearch}},[e._v(\"查询\")]),e._v(\" \"),s(\"el-button\",{attrs:{type:\"primary\",icon:\"el-icon-edit\"},on:{click:e.handleAdd}},[e._v(\"新增\")])],1),e._v(\" \"),s(\"el-table\",{directives:[{name:\"loading\",rawName:\"v-loading\",value:e.listLoading,expression:\"listLoading\"}],staticStyle:{width:\"100%\"},attrs:{data:e.project,stripe:\"\",border:\"\",\"highlight-current-row\":\"\"},on:{\"selection-change\":e.selsChange}},[s(\"el-table-column\",{attrs:{type:\"selection\",\"min-width\":\"5%\"}}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"name\",label:\"项目名称\",\"min-width\":\"20%\",\"show-overflow-tooltip\":\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"el-icon\",{attrs:{name:\"name\"}}),e._v(\" \"),t.row.status?s(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"#000000\"},attrs:{to:{name:\"项目面板\",params:{project_id:t.row.id}}}},[e._v(\"\\n                    \"+e._s(t.row.name)+\"\\n                \")]):e._e(),e._v(\"\\n                \"+e._s(t.row.status?\"\":t.row.name)+\"\\n            \")]}}])}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"businessline\",label:\"业务板块\",\"min-width\":\"10%\"}}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"type\",label:\"类型\",\"min-width\":\"10%\"}}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"LastUpdateTime\",label:\"最后修改时间\",\"min-width\":\"15%\"}}),e._v(\" \"),s(\"el-table-column\",{attrs:{prop:\"status\",label:\"状态\",\"min-width\":\"10%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:t.row.status,expression:\"scope.row.status\"}],attrs:{src:a(\"4928\")}}),e._v(\" \"),s(\"img\",{directives:[{name:\"show\",rawName:\"v-show\",value:!t.row.status,expression:\"!scope.row.status\"}],attrs:{src:a(\"60be\")}})]}}])}),e._v(\" \"),s(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[s(\"el-dropdown\",[s(\"el-button\",{attrs:{size:\"small\",type:\"primary\",plain:\"\"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v(\"编辑\"),s(\"i\",{staticClass:\"el-icon-arrow-down el-icon--right\"})]),e._v(\" \"),s(\"el-dropdown-menu\",{attrs:{slot:\"dropdown\"},slot:\"dropdown\"},[s(\"el-dropdown-item\",[s(\"el-button\",{attrs:{type:\"danger\",size:\"small\",plain:\"\"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v(\"删除\")])],1),e._v(\" \"),s(\"el-dropdown-item\",[s(\"el-button\",{attrs:{type:\"info\",size:\"small\",plain:\"\"},on:{click:function(a){return e.handleChangeStatus(t.$index,t.row)}}},[e._v(e._s(!1===t.row.status?\"启用\":\"禁用\"))])],1)],1)],1)]}}])})],1),e._v(\" \"),s(\"el-col\",{staticClass:\"toolbar\",attrs:{span:24}},[s(\"el-button\",{attrs:{type:\"danger\",disabled:0===this.sels.length},on:{click:e.batchRemove}},[e._v(\"批量删除\")]),e._v(\" \"),s(\"el-pagination\",{staticStyle:{float:\"right\"},attrs:{layout:\"total, prev, pager, next\",\"current-page\":e.page,total:e.total,\"page-size\":20,\"page-count\":e.pages},on:{\"current-change\":e.handleCurrentChange,\"update:currentPage\":function(t){e.page=t},\"update:current-page\":function(t){e.page=t}}})],1),e._v(\" \"),s(\"el-dialog\",{staticStyle:{width:\"75%\",left:\"12.5%\"},attrs:{width:\"60%\",title:e.form.title,visible:e.form.visible,\"close-on-click-modal\":!1},on:{\"update:visible\":function(t){return e.$set(e.form,\"visible\",t)}}},[s(\"el-form\",{ref:\"form\",attrs:{model:e.form.data,\"label-width\":\"80px\",rules:e.form.rules}},[s(\"el-form-item\",{attrs:{label:\"项目名称\",prop:\"name\"}},[s(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.form.data.name,callback:function(t){e.$set(e.form.data,\"name\",t)},expression:\"form.data.name\"}})],1),e._v(\" \"),s(\"el-form-item\",{attrs:{label:\"业务板块\",prop:\"businessLine\"}},[s(\"el-select\",{staticStyle:{width:\"100%\"},attrs:{placeholder:\"请选择\"},model:{value:e.form.data.businessline,callback:function(t){e.$set(e.form.data,\"businessline\",t)},expression:\"form.data.businessline\"}},e._l(e.businesslinelist,(function(e,t){return s(\"el-option\",{key:t+\"\",attrs:{label:e.name,value:e.name}})})),1)],1),e._v(\" \"),s(\"el-row\",{attrs:{gutter:24}},[s(\"el-col\",{attrs:{span:12}},[s(\"el-form-item\",{attrs:{label:\"类型\",prop:\"type\"}},[s(\"el-select\",{attrs:{placeholder:\"请选择\"},model:{value:e.form.data.type,callback:function(t){e.$set(e.form.data,\"type\",t)},expression:\"form.data.type\"}},e._l(e.options,(function(e){return s(\"el-option\",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(\" \"),s(\"el-col\",{attrs:{span:12}},[s(\"el-form-item\",{attrs:{label:\"版本号\",prop:\"version\"}},[s(\"el-input\",{attrs:{\"auto-complete\":\"off\"},model:{value:e.form.data.version,callback:function(t){e.$set(e.form.data,\"version\",t)},expression:\"form.data.version\"}})],1)],1)],1),e._v(\" \"),s(\"el-form-item\",{attrs:{label:\"描述\",prop:\"description\"}},[s(\"el-input\",{attrs:{type:\"textarea\",rows:6},model:{value:e.form.data.description,callback:function(t){e.$set(e.form.data,\"description\",t)},expression:\"form.data.description\"}})],1)],1),e._v(\" \"),s(\"div\",{staticClass:\"dialog-footer\",attrs:{slot:\"footer\"},slot:\"footer\"},[s(\"el-button\",{nativeOn:{click:function(t){e.form.visible=!1}}},[e._v(\"取消\")]),e._v(\" \"),s(\"el-button\",{attrs:{type:\"primary\",loading:e.form.loading},nativeOn:{click:function(t){return e.editSubmit(t)}}},[e._v(\"提交\")])],1)],1)],1)},n=[],i=(a(\"7f7f\"),a(\"4ec3\")),o=a(\"bc3a\"),r=a.n(o),l={data:function(){return{filters:{name:\"\",businessline:\"\"},project:[],total:0,page:1,pages:0,listLoading:!1,sels:[],form:{data:{id:\"\",name:\"\",version:\"\",type:\"\",description:\"\",businessline:\"\"},visible:!1,loading:!1,rules:{name:[{required:!0,message:\"请输入名称\",trigger:\"blur\"},{min:1,max:50,message:\"长度在 1 到 50 个字符\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择类型\",trigger:\"blur\"}],version:[{required:!0,message:\"请输入版本号\",trigger:\"blur\"},{min:1,max:20,message:\"长度在 1 到 20 个字符\",trigger:\"blur\"}],description:[{required:!1,message:\"请输入描述\",trigger:\"blur\"},{max:1024,message:\"不能超过1024个字符\",trigger:\"blur\"}]}},options:[{label:\"Web\",value:\"Web\"},{label:\"App\",value:\"App\"}],businesslinelist:[{name:\"集团科技\"},{name:\"加油宝科技\"},{name:\"物流科技\"},{name:\"金融科技\"},{name:\"其他\"}]}},methods:{getProjectList:function(){this.listLoading=!0;var e=this;sessionStorage.setItem(\"businessline\",e.filters.businessline);var t={page:e.page,name:e.filters.name,businessline:e.filters.businessline},a={Authorization:\"Token \"+sessionStorage.getItem(\"token\")};r.a.get(\"\".concat(i[\"f\"],\"/api/project/project_list\"),{params:t,headers:a}).then((function(t){e.listLoading=!1;var a=t.data,s=a.msg,n=a.code,i=a.data;\"999999\"===n?(e.total=i.total,e.project=i.data,e.pages=i.pages):e.$message.error({message:s,center:!0})}))},handleSearch:function(){this.page=1,this.getProjectList()},handleDel:function(e,t){var a=this;this.$confirm(\"确认删除项目[\"+t.name+\"]吗?\",\"提示\",{type:\"warning\"}).then((function(){a.listLoading=!0;var e=a,s={ids:[t.id]},n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};r.a.post(\"\".concat(i[\"f\"],\"/api/project/del_project\"),s,{header:n}).then((function(t){var a=t.data,s=a.msg,n=a.code;a.data;\"999999\"===n?e.$message({message:\"删除成功\",center:!0,type:\"success\"}):e.$message.error({message:s,center:!0}),e.getProjectList()}))})).catch((function(){}))},handleChangeStatus:function(e,t){var a=this;this.listLoading=!0;var s={project_id:t.id},n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};t.status?r.a.post(\"\".concat(i[\"f\"],\"/api/project/disable_project\"),s,{headers:n}).then((function(e){var s=e.data,n=s.msg,i=s.code;s.data;a.listLoading=!1,\"999999\"===i?(a.$message({message:\"禁用成功\",center:!0,type:\"success\"}),t.status=!t.status):a.$message.error({message:n,center:!0})})):r.a.post(\"\".concat(i[\"f\"],\"/api/project/enable_project\"),s,{headers:n}).then((function(e){var s=e.data,n=s.msg,i=s.code;s.data;a.listLoading=!1,\"999999\"===i?(a.$message({message:\"启用成功\",center:!0,type:\"success\"}),t.status=!t.status):a.$message.error({message:n,center:!0})}))},handleCurrentChange:function(e){this.page=e,this.getProjectList()},handleEdit:function(e,t){this.form.title=\"编辑\",this.form.visible=!0,this.form.data=Object.assign({},t)},handleAdd:function(){this.form.title=\"新增\",this.form.visible=!0,this.form.data={id:\"\",name:\"\",version:\"\",type:\"\",description:\"\",businessline:\"\"}},editSubmit:function(){var e=this,t=this;this.$refs.form.validate((function(a){a&&e.$confirm(\"确认提交吗？\",\"提示\",{}).then((function(){t.form.loading=!0;var e={name:t.form.data.name,type:t.form.data.type,version:t.form.data.version,description:t.form.data.description,businessline:t.form.data.businessline},a=\"\".concat(i[\"f\"],\"/api/project/add_project\");\"\"!=t.form.data.id&&(a=\"\".concat(i[\"f\"],\"/api/project/update_project\"),e[\"project_id\"]=t.form.data.id);var s={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};r.a.post(a,e,{headers:s}).then((function(e){var a=e.data,s=a.msg,n=a.code;a.data;t.form.loading=!1,\"999999\"===n?(t.$message({message:\"执行成功\",center:!0,type:\"success\"}),t.$refs[\"form\"].resetFields(),t.form.visible=!1,t.getProjectList()):t.$message.error({message:s,center:!0})})).catch((function(e){}))})).catch((function(){}))}))},selsChange:function(e){this.sels=e},batchRemove:function(){var e=this,t=this.sels.map((function(e){return e.id}));this.$confirm(\"确认删除选中记录吗？\",\"提示\",{type:\"warning\"}).then((function(){e.listLoading=!0;var a=e,s={ids:t},n={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};r.a.post(\"\".concat(i[\"f\"],\"/api/project/del_project\"),s,{header:n}).then((function(e){var t=e.data,s=t.msg,n=t.code;t.data;\"999999\"===n?a.$message({message:\"删除成功\",center:!0,type:\"success\"}):a.$message.error({message:s,center:!0}),a.getProjectList()}))})).catch((function(){}))}},mounted:function(){null!=sessionStorage.getItem(\"businessline\")&&(this.filters.businessline=sessionStorage.getItem(\"businessline\"),this.form.data.businessline=sessionStorage.getItem(\"businessline\")),this.getProjectList()}},c=l,u=a(\"2877\"),d=Object(u[\"a\"])(c,s,n,!1,null,null,null);t[\"default\"]=d.exports},4928:function(e,t,a){e.exports=a.p+\"static/img/icon-yes.d2f9f035.svg\"},\"60be\":function(e,t,a){e.exports=a.p+\"static/img/icon-no.439e8214.svg\"}}]);","extractedComments":[]}