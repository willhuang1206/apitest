{"code":"(window[\"webpackJsonp\"]=window[\"webpackJsonp\"]||[]).push([[\"chunk-16ef4a9a\"],{\"059d\":function(e,t,a){},\"243e\":function(e,t,a){\"use strict\";var r=a(\"059d\"),s=a.n(r);s.a},\"8dbb\":function(e,t,a){\"use strict\";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a(\"section\",[a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"接口列表\",params:{project_id:this.$route.params.project_id}}}},[a(\"el-button\",{staticClass:\"return-list\"},[a(\"i\",{staticClass:\"el-icon-d-arrow-left\",staticStyle:{\"margin-right\":\"5px\"}}),e._v(\"接口列表\")])],1),e._v(\" \"),a(\"router-link\",{staticStyle:{\"text-decoration\":\"none\",color:\"aliceblue\"},attrs:{to:{name:\"接口列表\",params:{project_id:this.$route.params.project_id}}}},[a(\"el-button\",{staticClass:\"return-list\",staticStyle:{float:\"right\"}},[e._v(\"取消\")])],1),e._v(\" \"),a(\"el-button\",{staticClass:\"return-list\",staticStyle:{float:\"right\",\"margin-right\":\"15px\"},attrs:{type:\"primary\"},nativeOn:{click:function(t){return e.addApi(t)}}},[e._v(\"保存\")]),e._v(\" \"),a(\"el-form\",{ref:\"form\",attrs:{model:e.form,rules:e.FormRules}},[a(\"div\",{staticStyle:{border:\"1px solid #e6e6e6\",\"margin-bottom\":\"10px\",padding:\"15px\"}},[a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"接口分组:\",\"label-width\":\"83px\",prop:\"apiGroupLevelFirst_id\"}},[a(\"treeselect\",{attrs:{options:e.group,placeholder:\"请选择\"},model:{value:e.form.apiGroupLevelFirst_id,callback:function(t){e.$set(e.form,\"apiGroupLevelFirst_id\",t)},expression:\"form.apiGroupLevelFirst_id\"}})],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:10}},[a(\"el-form-item\",{attrs:{label:\"接口类型:\",\"label-width\":\"83px\",prop:\"type\"}},[a(\"el-select\",{attrs:{placeholder:\"请选择类型\"},model:{value:e.form.type,callback:function(t){e.$set(e.form,\"type\",t)},expression:\"form.type\"}},e._l(e.type,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:8}},[a(\"el-form-item\",{attrs:{label:\"接口名称:\",\"label-width\":\"83px\",prop:\"name\"}},[a(\"el-input\",{attrs:{placeholder:\"名称\",\"auto-complete\":\"\"},model:{value:e.form.name,callback:function(t){e.$set(e.form,\"name\",\"string\"===typeof t?t.trim():t)},expression:\"form.name\"}})],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:10}},[a(\"el-form-item\",{attrs:{label:\"状态:\",\"label-width\":\"72px\"}},[a(\"el-select\",{attrs:{placeholder:\"接口状态\"},model:{value:e.form.status,callback:function(t){e.$set(e.form,\"status\",t)},expression:\"form.status\"}},e._l(e.status,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:6}},[a(\"el-form-item\",{attrs:{label:\"URL:\",\"label-width\":\"83px\"}},[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:e.form.requestType,callback:function(t){e.$set(e.form,\"requestType\",t)},expression:\"form.requestType\"}},e._l(e.request,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)],1)],1),e._v(\" \"),a(\"el-col\",{attrs:{span:18}},[a(\"el-form-item\",{attrs:{prop:\"apiAddress\"}},[a(\"el-input\",{attrs:{placeholder:\"地址\",\"auto-complete\":\"\"},model:{value:e.form.apiAddress,callback:function(t){e.$set(e.form,\"apiAddress\",\"string\"===typeof t?t.trim():t)},expression:\"form.apiAddress\"}})],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{gutter:10}},[a(\"el-col\",{attrs:{span:18}},[a(\"el-form-item\",{attrs:{label:\"接口描述:\",\"label-width\":\"83px\"}},[a(\"el-input\",{attrs:{type:\"textarea\",rows:3,placeholder:\"接口描述\"},model:{value:e.form.description,callback:function(t){e.$set(e.form,\"description\",t)},expression:\"form.description\"}})],1)],1)],1)],1),e._v(\" \"),a(\"el-row\",{attrs:{span:24}},[a(\"el-collapse\",{on:{change:e.handleChange},model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:\"activeNames\"}},[a(\"el-collapse-item\",{attrs:{title:\"请求头部\",name:\"1\"}},[a(\"el-table\",{attrs:{data:e.form.headDict,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\",sortable:\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"head标签\",filterable:\"\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",a)},expression:\"scope.row.name\"}},e._l(e.header,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1),e._v(\" \"),a(\"el-input\",{staticClass:\"selectInput\",attrs:{value:t.row.name,placeholder:\"请输入内容\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"30%\",sortable:\"\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.value,placeholder:\"请输入内容\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delHead(t.$index)}}}),e._v(\" \"),t.$index===e.form.headDict.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addHead}}):e._e()]}}])})],1)],1),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"请求参数\",name:\"2\"}},[a(\"div\",{staticStyle:{margin:\"5px\"}},[a(\"el-row\",{attrs:{span:24}},[a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"application/x-www-form-urlencoded\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"表单\")])],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"application/json\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"JSON\")])],1),e._v(\" \"),a(\"el-col\",{attrs:{span:4}},[a(\"el-radio\",{attrs:{label:\"raw\"},model:{value:e.requestParameterType,callback:function(t){e.requestParameterType=t},expression:\"requestParameterType\"}},[e._v(\"JSON源数据\")]),a(\"el-button\",{directives:[{name:\"show\",rawName:\"v-show\",value:\"jyb\"===e.form.type,expression:\"form.type==='jyb'\"}],attrs:{type:\"primary\",size:\"mini\"},on:{click:e.jybDecodePost}},[e._v(\"解密\")])],1)],1)],1),e._v(\" \"),a(\"el-table\",{class:e.ParameterType?\"parameter-a\":\"parameter-b\",attrs:{data:e.form.requestList,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.name,placeholder:\"请输入参数值\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"参数值\",\"min-width\":\"30%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{type:\"textarea\",rows:1,value:t.row.value,placeholder:\"请输入参数值\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"_type\",label:\"参数类型\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:t.row._type,callback:function(a){e.$set(t.row,\"_type\",a)},expression:\"scope.row._type\"}},e._l(e.paramType,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"必填?\",\"min-width\":\"10%\",prop:\"required\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"必填？\"},model:{value:t.row.required,callback:function(a){e.$set(t.row,\"required\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.required\"}},e._l(e.required4,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"description\",label:\"参数说明\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.desc,placeholder:\"请输入参数说明\"},model:{value:t.row.description,callback:function(a){e.$set(t.row,\"description\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.description\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delParameter(t.$index)}}}),e._v(\" \"),t.$index===e.form.requestList.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addParameter}}):e._e()]}}])})],1),e._v(\" \"),[a(\"el-input\",{class:e.ParameterType?\"parameter-b\":\"parameter-a\",attrs:{type:\"textarea\",rows:5,placeholder:\"请输入内容\"},model:{value:e.parameterRaw,callback:function(t){e.parameterRaw=\"string\"===typeof t?t.trim():t},expression:\"parameterRaw\"}})]],2),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"返回参数\",name:\"3\"}},[a(\"el-table\",{attrs:{data:e.form.responseList,\"highlight-current-row\":\"\"}},[a(\"el-table-column\",{attrs:{prop:\"name\",label:\"参数名\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.name,placeholder:\"请输入参数值\"},model:{value:t.row.name,callback:function(a){e.$set(t.row,\"name\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.name\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"value\",label:\"预期值\",\"min-width\":\"30%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.value,placeholder:\"请输入参数值\"},model:{value:t.row.value,callback:function(a){e.$set(t.row,\"value\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.value\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"_type\",label:\"参数类型\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"请求方式\"},model:{value:t.row._type,callback:function(a){e.$set(t.row,\"_type\",a)},expression:\"scope.row._type\"}},e._l(e.paramType,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"必含?\",\"min-width\":\"10%\",prop:\"required\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-select\",{attrs:{placeholder:\"必填？\"},model:{value:t.row.required,callback:function(a){e.$set(t.row,\"required\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.required\"}},e._l(e.required4,(function(e,t){return a(\"el-option\",{key:t+\"\",attrs:{label:e.label,value:e.value}})})),1)]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{prop:\"description\",label:\"参数说明\",\"min-width\":\"15%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-input\",{attrs:{value:t.row.desc,placeholder:\"请输入参数说明\"},model:{value:t.row.description,callback:function(a){e.$set(t.row,\"description\",\"string\"===typeof a?a.trim():a)},expression:\"scope.row.description\"}})]}}])}),e._v(\" \"),a(\"el-table-column\",{attrs:{label:\"操作\",\"min-width\":\"20%\"},scopedSlots:e._u([{key:\"default\",fn:function(t){return[a(\"el-button\",{staticClass:\"el-icon-delete\",attrs:{size:\"mini\"},on:{click:function(a){return e.delResponse(t.$index)}}}),e._v(\" \"),t.$index===e.form.responseList.length-1?a(\"el-button\",{staticClass:\"el-icon-plus\",attrs:{size:\"mini\"},on:{click:e.addResponse}}):e._e()]}}])})],1)],1),e._v(\" \"),a(\"el-collapse-item\",{attrs:{title:\"返回样例\",name:\"4\"}},[a(\"div\",{staticStyle:{\"margin-bottom\":\"10px\"}},[a(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:e.formatResponse}},[e._v(\"格式转换\")]),e._v(\" \"),a(\"el-button\",{attrs:{type:\"primary\",size:\"mini\"},on:{click:e.updateResponse}},[e._v(\"生成返回参数\")])],1),e._v(\" \"),a(\"el-card\",{staticClass:\"box-card\"},[a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.format,expression:\"!format\"}],model:{value:e.form.data,callback:function(t){e.$set(e.form,\"data\",t)},expression:\"form.data\"}},[a(\"el-input\",{attrs:{value:e.form.data,type:\"textarea\",rows:5,placeholder:\"返回样例\"},model:{value:e.form.data,callback:function(t){e.$set(e.form,\"data\",t)},expression:\"form.data\"}})],1),e._v(\" \"),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:e.format,expression:\"format\"}]},[a(\"json-viewer\",{attrs:{value:e.form.jsonData,\"expand-depth\":5,copyable:\"\"}})],1),e._v(\" \"),a(\"div\",{directives:[{name:\"show\",rawName:\"v-show\",value:!e.form.data,expression:\"!form.data\"}],staticClass:\"raw\"},[e._v(\"暂无数据\")])])],1)],1)],1)],1)],1)},s=[],o=(a(\"4917\"),a(\"3b2b\"),a(\"c5f6\"),a(\"7f7f\"),a(\"ac6a\"),a(\"7618\")),l=a(\"ca17\"),i=a.n(l),n=(a(\"542c\"),a(\"4ec3\")),u=a(\"bc3a\"),p=a.n(u),c=a(\"1157\"),m=a.n(c),d={components:{Treeselect:i.a},data:function(){return{type:[{value:\"http\",label:\"普通http\"},{value:\"jyb\",label:\"加油宝app\"},{value:\"service\",label:\"微服务\"}],request:[{value:\"GET\",label:\"GET\"},{value:\"POST\",label:\"POST\"},{value:\"PUT\",label:\"PUT\"},{value:\"DELETE\",label:\"DELETE\"}],Http:[{value:\"HTTP\",label:\"HTTP\"},{value:\"HTTPS\",label:\"HTTPS\"}],paramType:[{value:\"Int\",label:\"Int\"},{value:\"String\",label:\"String\"},{value:\"Object\",label:\"Object\"},{value:\"Array\",label:\"Array\"}],checkHeadList:[],checkParameterList:[],ParameterType:!0,group:[],requestParameterType:\"application/json\",secondGroup:[],status:[{value:!0,label:\"启用\"},{value:!1,label:\"禁用\"}],header:[{value:\"Accept\",label:\"Accept\"},{value:\"Accept-Charset\",label:\"Accept-Charset\"},{value:\"Accept-Encoding\",label:\"Accept-Encoding\"},{value:\"Accept-Language\",label:\"Accept-Language\"},{value:\"Accept-Ranges\",label:\"Accept-Ranges\"},{value:\"Authorization\",label:\"Authorization\"},{value:\"Cache-Control\",label:\"Cache-Control\"},{value:\"Connection\",label:\"Connection\"},{value:\"Cookie\",label:\"Cookie\"},{value:\"Content-Length\",label:\"Content-Length\"},{value:\"Content-Type\",label:\"Content-Type\"},{value:\"Content-MD5\",label:\"Content-MD5\"},{value:\"Date\",label:\"Date\"},{value:\"Expect\",label:\"Expect\"},{value:\"From\",label:\"From\"},{value:\"Host\",label:\"Host\"},{value:\"If-Match\",label:\"If-Match\"},{value:\"If-Modified-Since\",label:\"If-Modified-Since\"},{value:\"If-None-Match\",label:\"If-None-Match\"},{value:\"If-Range\",label:\"If-Range\"},{value:\"If-Unmodified-Since\",label:\"If-Unmodified-Since\"},{value:\"Max-Forwards\",label:\"Max-Forwards\"},{value:\"Origin\",label:\"Origin\"},{value:\"Pragma\",label:\"Pragma\"},{value:\"Proxy-Authorization\",label:\"Proxy-Authorization\"},{value:\"Range\",label:\"Range\"},{value:\"Referer\",label:\"Referer\"},{value:\"TE\",label:\"TE\"},{value:\"Upgrade\",label:\"Upgrade\"},{value:\"User-Agent\",label:\"User-Agent\"},{value:\"Via\",label:\"Via\"},{value:\"Warning\",label:\"Warning\"}],header4:\"\",addParameterFormVisible:!1,addResponseFormVisible:!1,required4:[{value:!0,label:\"是\"},{value:!1,label:\"否\"}],httpCode:[{value:\"\",label:\"\"},{value:\"200\",label:\"200\"},{value:\"404\",label:\"404\"},{value:\"400\",label:\"400\"},{value:\"500\",label:\"500\"},{value:\"502\",label:\"502\"},{value:\"302\",label:\"302\"}],result:!0,activeNames:[\"2\",\"3\",\"4\"],id:\"\",parameterRaw:\"\",form:{apiGroupLevelFirst_id:null,name:\"\",type:\"http\",status:!0,requestType:\"POST\",httpType:\"HTTP\",apiAddress:\"\",headDict:[{name:\"\",value:\"\"}],requestList:[{name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"}],requestParameterType:\"application/json\",responseList:[{name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"}],mockCode:\"\",data:\"\",jsonData:\"\"},FormRules:{name:[{required:!0,message:\"请输入名称\",trigger:\"blur\"},{max:50,message:\"不能超过50个字\",trigger:\"blur\"}],type:[{required:!0,message:\"请选择类型\",trigger:\"blur\"}],apiAddress:[{required:!0,message:\"请输入地址\",trigger:\"blur\"}],required:[{type:\"boolean\",required:!0,message:\"请选择状态\",trigger:\"blur\"}],apiGroupLevelFirst_id:[{required:!0,message:\"请选择分组\",trigger:\"blur\"}]},editForm:{name:\"\",value:\"\",required:\"\",restrict:\"\",description:\"\"},format:!1}},methods:{isJsonString:function(e){try{if(\"object\"===Object(o[\"a\"])(JSON.parse(e)))return!0}catch(t){}return!1},addApiInfo:function(){this.form.data&&this.form.mockCode?this.isJsonString(this.form.data)?this.addApi():this.$message({message:\"mock格式错误\",center:!0,type:\"error\"}):this.form.data||this.form.mockCode?this.$message({message:\"HTTP状态或mock为空\",center:!0,type:\"warning\"}):this.addApi()},addApi:function(){var e=this;this.$refs.form.validate((function(t){if(t){var a=e;console.log(e.form.requestList),e.$confirm(\"确认提交吗？\",\"提示\",{}).then((function(){a.form.parameterType=a.requestParameterType;var e=a.form.parameterType,t={},r={};\"application/x-www-form-urlencoded\"===e||\"application/json\"===e||\"text/plain\"===e?(t=a.form.requestList,a.form.requestList.forEach((function(e){e.required&&(\"Object\"==e._type||\"Array\"==e._type?r[e.name]=JSON.parse(e.value):r[e.name]=e.value)}))):t=a.parameterRaw,console.log(t);var s={project_id:Number(a.$route.params.project_id),apiGroupLevelFirst_id:Number(a.form.apiGroupLevelFirst_id),name:a.form.name,type:a.form.type,httpType:a.form.httpType,requestType:a.form.requestType,apiAddress:a.form.apiAddress,status:a.form.status,headDict:a.form.headDict,requestParameterType:e,requestList:t,responseList:a.form.responseList,mockCode:a.form.mockCode,data:a.form.data,description:a.form.description,params:JSON.stringify(r)},o={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};a.parameterRaw&&\"raw\"===e&&!a.isJsonString(a.parameterRaw)?a.$message({message:\"源数据格式错误\",center:!0,type:\"error\"}):p.a.post(\"\".concat(n[\"f\"],\"/api/api/add_api\"),s,{headers:o}).then((function(e){var t=e.data,r=t.msg,s=t.code;t.data;\"999999\"===s?(a.$router.push({name:\"分组接口列表\",params:{project_id:a.$route.params.project_id,firstGroup:a.form.apiGroupLevelFirst_id}}),a.$message({message:\"保存成功\",center:!0,type:\"success\"})):a.$message.error({message:r,center:!0})}))})).catch((function(){}))}}))},editParameterSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&(e.form.requestList[e.id]=e.editForm,e.addParameterFormVisible=!1)}))},handleParameterEdit:function(e,t){this.addParameterFormVisible=!0,this.id=e,this.editForm=Object.assign({},t)},editResponseSubmit:function(){var e=this;this.$refs.editForm.validate((function(t){t&&(e.form.responseList[e.id]=e.editForm,e.addResponseFormVisible=!1)}))},handleResponseEdit:function(e,t){this.addResponseFormVisible=!0,this.id=e,this.editForm=Object.assign({},t)},getApiGroup:function(){var e=this,t=this,a={project_id:this.$route.params.project_id},r={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")};p.a.get(\"\".concat(n[\"f\"],\"/api/api/group\"),{params:a,headers:r}).then((function(a){var r=a.data,s=r.msg,o=r.code,l=r.data;\"999999\"===o?(t.group=l,null!=sessionStorage.getItem(\"api_group\")&&(e.form.apiGroupLevelFirst_id=Number(sessionStorage.getItem(\"api_group\")))):t.$message.error({message:s,center:!0})}))},addHead:function(){var e={name:\"\",value:\"\"};this.form.headDict.push(e)},delHead:function(e){this.form.headDict.splice(e,1),0===this.form.headDict.length&&this.form.headDict.push({name:\"\",value:\"\"})},addParameter:function(){var e={name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"};this.form.requestList.push(e)},delParameter:function(e){this.form.requestList.splice(e,1),0===this.form.requestList.length&&this.form.requestList.push({name:\"\",value:\"\",_type:\"String\",required:!0,restrict:\"\",description:\"\"})},addResponse:function(){var e={name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"};this.form.responseList.push(e)},delResponse:function(e){this.form.responseList.splice(e,1),0===this.form.responseList.length&&this.form.responseList.push({name:\"\",value:\"\",_type:\"String\",required:!0,description:\"\"})},changeParameterType:function(){if(\"application/json\"===this.requestParameterType){if(this.ParameterType=!0,\"\"!=this.parameterRaw&&(0==this.form.requestList.length||\"\"==this.form.requestList[0][\"name\"]))try{var e=this;this.form.requestList=[];var t=JSON.parse(this.parameterRaw);m.a.each(t,(function(t,a){var r=\"String\";\"object\"==Object(o[\"a\"])(a)?(a instanceof Array?r=\"Array\":a instanceof Object&&(r=\"Object\"),a=JSON.stringify(a)):\"number\"==typeof a&&(r=\"Int\");var s={name:t,value:a,_type:r,required:\"True\",restrict:\"\",description:\"\"};e.form.requestList.push(s)}))}catch(a){alert(a)}}else\"application/x-www-form-urlencoded\"===this.requestParameterType||\"text/plain\"===this.requestParameterType?this.ParameterType=!0:this.ParameterType=!1},showData:function(){this.result=!0},showHead:function(){this.result=!1},handleChange:function(e){},formatResponse:function(){if(!this.format&&\"\"!=this.form.data)try{this.form.jsonData=JSON.parse(this.form.data)}catch(e){}this.format=!this.format},getDataType:function(e){var t=\"String\";try{e instanceof Array?t=\"Array\":e instanceof Object?t=\"Object\":\"number\"==typeof e&&(t=\"Int\")}catch(a){}return t},updateResponse:function(){var e=this;this.$confirm(\"确认根据返回样例生成返回参数吗？\",\"提示\",{}).then((function(){e.form.responseList=[];try{var t=JSON.parse(e.form.data);\"number\"!=typeof t&&e.convertResponse(\"\",t,2)}catch(a){alert(a)}})).catch((function(){}))},convertResponse:function(e,t,a){var r=this;m.a.each(t,(function(t,s){var o={required:!0,description:\"\"};try{o[\"name\"]=\"\"!=e?e+\".\"+t:t;var l=r.getDataType(s);if(\"String\"==l||\"Int\"==l)o[\"_type\"]=l,o[\"value\"]=s,r.form.responseList.push(o);else if(\"Array\"==l){o[\"_type\"]=l;var i=r.getDataType(s[0]);\"String\"==i||\"Int\"==i?(o[\"value\"]=JSON.stringify(s),r.form.responseList.push(o)):\"Object\"==i&&(o[\"value\"]=\"[]\",r.form.responseList.push(o),a>0&&r.convertResponse(o[\"name\"]+\"[*]\",s[0],a-1))}else\"Object\"==l&&(o[\"_type\"]=l,o[\"value\"]=\"{}\",r.form.responseList.push(o),a>0&&r.convertResponse(o[\"name\"],s,a-1))}catch(n){alert(n.message)}}))},jybDecodePost:function(){var e=this.parameterRaw.trim();if(\"\"!=e){var t=this.form.apiAddress.trim(),a=0,r=new RegExp(\"(^|&)_pos=([^&]*)(&|$)\",\"i\"),s=t.match(r);null!=s&&(a=unescape(s[2]));var o=\"\";r=new RegExp(\"(^|&)ver=([^&]*)(&|$)\",\"i\"),s=t.match(r),null!=s&&(o=unescape(s[2]));var l={pos:a,post:e,version:o},i={\"Content-Type\":\"application/json\",Authorization:\"Token \"+sessionStorage.getItem(\"token\")},u=this;p.a.post(n[\"f\"]+\"/api/api/jybdecode\",l,{headers:i}).then((function(e){var t=e.data,a=t.msg,r=t.code,s=t.data;\"999999\"===r?u.parameterRaw=JSON.stringify(s):u.$message.error({message:a,center:!0})}))}},fastAdd:function(){var e=this,t=this.$route.params.addForm;t&&(this.form.requestList=[],this.form.requestType=t.method.toUpperCase(),this.form.type=t.type,this.form.httpType=t.http,this.form.apiAddress=t.addr,t.headers.length>0&&(this.form.headDict=t.headers),this.form.parameterRaw=t.parameter,t.parameters.forEach((function(t){t[\"_type\"]=e.getDataType(t[\"value\"]),t[\"required\"]=!0,t[\"restrict\"]=\"\",t[\"description\"]=\"\",e.form.requestList.push(t)})),this.form.mockCode=t.statusCode,this.form.jsonData=t.resultData,this.form.data=JSON.stringify(t.resultData),t.contentType&&(this.form.requestParameterType=t.contentType))}},watch:{requestParameterType:function(){this.changeParameterType()}},mounted:function(){this.getApiGroup(),this.fastAdd()}},f=d,v=(a(\"243e\"),a(\"98c6\"),a(\"2877\")),h=Object(v[\"a\"])(f,r,s,!1,null,\"086b4419\",null);t[\"default\"]=h.exports},\"98c6\":function(e,t,a){\"use strict\";var r=a(\"b93f\"),s=a.n(r);s.a},b93f:function(e,t,a){}}]);","extractedComments":[]}