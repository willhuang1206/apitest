{"remainingRequest":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/huangrong/workspace/apitest/apitest-vue/src/views/project/projectDynamic.vue?vue&type=style&index=0&id=17d27536&lang=scss&scoped=true&","dependencies":[{"path":"/Users/huangrong/workspace/apitest/apitest-vue/src/views/project/projectDynamic.vue","mtime":1588749633777},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/postcss-loader/src/index.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/sass-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/huangrong/workspace/apitest/apitest-vue/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n.dynamic-manage {\n    margin: 35px;\n}\n",{"version":3,"sources":["projectDynamic.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8FA;AACA;AACA","file":"projectDynamic.vue","sourceRoot":"src/views/project","sourcesContent":["<template>\n    <el-row class=\"dynamic-manage\">\n        <!--工具条-->\n        <el-col :span=\"24\" class=\"toolbar\" style=\"padding-bottom: 0px;\">\n            <el-form :inline=\"true\" :model=\"filters\" @submit.native.prevent>\n                <el-form-item>\n                    <el-input v-model.trim=\"filters.name\" placeholder=\"内容\" @keyup.enter.native=\"handleSearch\"></el-input>\n                </el-form-item>\n                <el-form-item>\n                    <el-button type=\"primary\" @click=\"handleSearch\">查询</el-button>\n                </el-form-item>\n            </el-form>\n        </el-col>\n        <el-col :span=\"24\">\n            <el-table :data=\"tableData\" stripe style=\"width: 100%\" v-loading=\"listLoading\">\n                <el-table-column prop=\"time\" label=\"操作时间\" min-width=\"13%\">\n                </el-table-column>\n                <el-table-column prop=\"type\" label=\"类型\" min-width=\"10%\">\n                </el-table-column>\n                <el-table-column prop=\"operationObject\" label=\"操作对象\" min-width=\"15%\">\n                </el-table-column>\n                <el-table-column prop=\"operationUser\" label=\"操作人\" min-width=\"15%\">\n                </el-table-column>\n                <el-table-column prop=\"description\" label=\"描述\" min-width=\"47%\">\n                </el-table-column>\n            </el-table>\n            <!--工具条-->\n            <el-pagination layout=\"total, prev, pager, next\" @current-change=\"handleCurrentChange\" :current-page.sync=\"page\" :total=\"total\" :page-size=\"20\" :page-count=\"pages\" style=\"float:right;\">\n            </el-pagination>\n        </el-col>\n    </el-row>\n</template>\n\n<script>\n    import { getProjectDynamicList } from '../../api/api'\n    export default {\n        data() {\n            return {\n                filters: {\n                    name: \"\",\n                },\n                tableData: [],\n                total: 0,\n                page: 1,\n                pages: 0,\n                listLoading: false,\n            }\n        },\n        methods: {\n            handleCurrentChange(val) {\n                this.page = val;\n                this.getProjectDynamic();\n            },\n            handleSearch(){\n                this.page=1;\n                this.getProjectDynamic();\n            },\n            // 获取项目动态\n            getProjectDynamic() {\n                this.listLoading = true;\n                let self = this;\n                let params = {\n                    project_id: Number(this.$route.params.project_id),\n                    page: self.page,\n                    name: self.filters.name,\n                };\n                let headers = {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: 'Token '+sessionStorage.getItem('token')\n                };\n                getProjectDynamicList(headers, params).then(_data => {\n                    let {msg, code, data} = _data;\n                    self.listLoading = false;\n                    if (code === '999999') {\n                        self.total = data.total;\n                        self.pages = data.pages;\n                        self.tableData = data.data\n                    }\n                    else {\n                        self.$message.error({\n                            message: msg,\n                            center: true,\n                        })\n                    }\n                })\n            },\n        },\n        mounted() {\n            this.getProjectDynamic();\n        }\n    }\n</script>\n\n<style lang=\"scss\" scoped>\n    .dynamic-manage {\n        margin: 35px;\n    }\n</style>\n"]}]}